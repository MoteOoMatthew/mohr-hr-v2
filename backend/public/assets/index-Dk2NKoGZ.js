import{r as l,a as st,b as at}from"./vendor-Gm9i_4Ku.js";import{u as rt,a as fe,L as Re,O as nt,N as it,R as lt,b as Q,B as dt}from"./router-AmOfzmdZ.js";import{a as D}from"./utils-NIGUFBhG.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function s(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(r){if(r.ep)return;r.ep=!0;const d=s(r);fetch(r.href,d)}})();var He={exports:{}},ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot=l,ct=Symbol.for("react.element"),xt=Symbol.for("react.fragment"),mt=Object.prototype.hasOwnProperty,ht=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gt={key:!0,ref:!0,__self:!0,__source:!0};function We(n,t,s){var a,r={},d=null,x=null;s!==void 0&&(d=""+s),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(x=t.ref);for(a in t)mt.call(t,a)&&!gt.hasOwnProperty(a)&&(r[a]=t[a]);if(n&&n.defaultProps)for(a in t=n.defaultProps,t)r[a]===void 0&&(r[a]=t[a]);return{$$typeof:ct,type:n,key:d,ref:x,props:r,_owner:ht.current}}ke.Fragment=xt;ke.jsx=We;ke.jsxs=We;He.exports=ke;var e=He.exports,_e={},Ie=st;_e.createRoot=Ie.createRoot,_e.hydrateRoot=Ie.hydrateRoot;const ut=!1,Ve=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Ge=Ve?"http://localhost:5000":"https://mohr-hr-v2.onrender.com";console.log("üîß API Configuration:",{isDevelopment:ut,isLocalhost:Ve,baseURL:Ge,env:"production",hostname:window.location.hostname});D.defaults.baseURL=Ge;D.defaults.headers.common["Content-Type"]="application/json";D.interceptors.request.use(n=>{const t=localStorage.getItem("token");return t&&(n.headers.Authorization=`Bearer ${t}`),n},n=>(console.error("‚ùå API Request Error:",n),Promise.reject(n)));D.interceptors.response.use(n=>n,n=>{var t,s;return console.error("‚ùå API Response Error:",(t=n.response)==null?void 0:t.status,(s=n.response)==null?void 0:s.data),Promise.reject(n)});class yt{constructor(){this.keys=null,this.userSalt=null,this.isInitialized=!1,this.sessionKeys=null,this.sessionId=null,this.keyRotationInterval=null,this.pfsEnabled=!0,this.autoMode=!0,this.performanceThreshold=1e3,this.networkSpeed="unknown",this.encryptionMode="e2ee",this.statusCallbacks=[],this.performanceHistory=[]}async initialize(t,s){try{if(console.log("üîí E2EE Service: Starting initialization..."),console.log("üîë Password provided:",t?"Yes":"No"),console.log("üßÇ Salt provided:",s?"Yes":"No"),console.log("üåê Web Crypto supported:",this.isSupported()),!this.isSupported())throw new Error("Web Crypto API not supported in this browser");if(!t||!s)throw new Error("Password and salt are required for E2EE initialization");return this.userSalt=s,console.log("üîê Deriving keys from password and salt..."),this.keys=await this.deriveKeys(t,s),console.log("‚úÖ Keys derived successfully"),this.isInitialized=!0,console.log("‚úÖ E2EE Service marked as initialized"),this.pfsEnabled&&(console.log("üîÑ Initializing Perfect Forward Secrecy..."),await this.initializePFS(),console.log("‚úÖ PFS initialized successfully")),console.log("üìä Starting performance monitoring..."),this.startPerformanceMonitoring(),console.log("üîí E2EE Service initialized successfully with PFS"),this.notifyStatusChange(),!0}catch(a){return console.error("‚ùå Failed to initialize E2EE service:",a),console.error("üîç Error details:",a.message),console.error("üîç Error stack:",a.stack),this.encryptionMode="tls",this.isInitialized=!0,console.log("üîÑ Falling back to TLS mode due to E2EE initialization failure"),this.notifyStatusChange(),!1}}async initializePFS(){try{this.sessionId=this.generateSessionId(),await this.rotateSessionKeys(),this.keyRotationInterval=setInterval(async()=>{await this.rotateSessionKeys()},30*60*1e3),console.log("üîÑ PFS initialized with session ID:",this.sessionId)}catch(t){throw console.error("‚ùå PFS initialization failed:",t),t}}async rotateSessionKeys(){try{const t=await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]),s=crypto.getRandomValues(new Uint8Array(32)),a=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=await crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("session-encryption-salt"),iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),d=await crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("session-signing-salt"),iterations:1e5,hash:"SHA-256"},a,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]);this.sessionKeys={encryptionKey:r,signingKey:d,ephemeralKeyPair:t,randomSeed:s,timestamp:Date.now()},console.log("üîÑ Session keys rotated at:",new Date().toISOString())}catch(t){throw console.error("‚ùå Session key rotation failed:",t),t}}generateSessionId(){const t=crypto.getRandomValues(new Uint8Array(16));return Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}async deriveKeys(t,s){const a=await crypto.subtle.importKey("raw",new TextEncoder().encode(t+s),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=await crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("mohr-encryption-salt"),iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),d=await crypto.subtle.deriveKey({name:"PBKDF2",salt:new TextEncoder().encode("mohr-signing-salt"),iterations:1e5,hash:"SHA-256"},a,{name:"HMAC",hash:"SHA-256"},!1,["sign","verify"]);return{encryptionKey:r,signingKey:d}}async encryptField(t,s="default",a=!1){if(!this.isInitialized)throw new Error("E2EE service not initialized");try{const r=this.sessionKeys||this.keys,d=crypto.getRandomValues(new Uint8Array(12)),x={value:t,context:s,timestamp:Date.now(),sessionId:this.sessionId||"legacy"},w=JSON.stringify(x),g=new TextEncoder().encode(w),v=await crypto.subtle.encrypt({name:"AES-GCM",iv:d},r.encryptionKey,g),u=await crypto.subtle.sign("HMAC",r.signingKey,v),N={version:"2.0",mode:this.encryptionMode,iv:this.arrayBufferToBase64(d),data:this.arrayBufferToBase64(v),signature:this.arrayBufferToBase64(u),deniable:a,sessionId:this.sessionId||"legacy"};return btoa(JSON.stringify(N))}catch(r){console.error("‚ùå Field encryption failed:",r),this.encryptionMode==="e2ee"&&(console.warn("üîÑ Falling back to TLS mode due to encryption failure"),this.encryptionMode="tls",this.notifyEncryptionModeChange("e2ee","tls","Encryption failure - falling back to TLS"),this.notifyStatusChange());const d={version:"2.0",mode:"tls",data:btoa(t),fallback:!0};return btoa(JSON.stringify(d))}}async decryptField(t){var s,a;if(!this.isInitialized)throw new Error("E2EE service not initialized");if(!t)return null;try{const r=((s=this.sessionKeys)==null?void 0:s.encryptionKey)||this.keys.encryptionKey,d=((a=this.sessionKeys)==null?void 0:a.signingKey)||this.keys.signingKey,x=this.base64ToArrayBuffer(t),w=x.slice(0,12),p=x.slice(12,-32),g=x.slice(-32);if(!await crypto.subtle.verify("HMAC",d,g,p))throw new Error("Data integrity check failed");const u=await crypto.subtle.decrypt({name:"AES-GCM",iv:w},r,p);return JSON.parse(new TextDecoder().decode(u)).value}catch(r){throw console.error("Decryption failed:",r),new Error("Field decryption failed")}}async encryptEmployee(t,s=!1){const a={},r=["first_name","last_name","email","phone","salary","ssn","address","performance_review"];for(const d of r)t[d]&&(a[`${d}_encrypted`]=await this.encryptField(t[d],`employee_${d}`,s));return s&&(a.deniable_metadata=await this.encryptField(JSON.stringify({type:"deniable_employee",timestamp:Date.now(),compartment:"hidden"}),"deniable_metadata",!0)),a}async decryptEmployee(t){const s={},a=["first_name","last_name","email","phone","salary","ssn","address","performance_review"];for(const r of a){const d=t[`${r}_encrypted`];if(d)try{s[r]=await this.decryptField(d)}catch(x){console.warn(`Failed to decrypt ${r}:`,x),s[r]=null}}return s}async createDeniableCompartment(t,s){if(!this.isInitialized)throw new Error("E2EE service not initialized");try{const a={name:t,data:s,timestamp:Date.now(),signature:await this.generateCompartmentSignature(t,s)};return await this.encryptField(JSON.stringify(a),"deniable_compartment",!0)}catch(a){throw console.error("Failed to create deniable compartment:",a),a}}async accessDeniableCompartment(t,s){if(!this.isInitialized)throw new Error("E2EE service not initialized");try{const a=await this.decryptField(t),r=JSON.parse(a),d=await this.generateCompartmentSignature(s,r.data);if(r.signature!==d)throw new Error("Compartment signature verification failed");return r.data}catch(a){throw console.error("Failed to access deniable compartment:",a),a}}async generateCompartmentSignature(t,s){var d;const a=((d=this.sessionKeys)==null?void 0:d.signingKey)||this.keys.signingKey,r=await crypto.subtle.sign("HMAC",a,new TextEncoder().encode(t+JSON.stringify(s)));return this.arrayBufferToBase64(r)}getPFSStatus(){var t,s;return{enabled:this.pfsEnabled,sessionId:this.sessionId,lastRotation:(t=this.sessionKeys)==null?void 0:t.timestamp,nextRotation:(s=this.sessionKeys)!=null&&s.timestamp?this.sessionKeys.timestamp+30*60*1e3:null}}cleanup(){this.keyRotationInterval&&(clearInterval(this.keyRotationInterval),this.keyRotationInterval=null),this.keys=null,this.sessionKeys=null,this.userSalt=null,this.isInitialized=!1,this.sessionId=null}generateSalt(){const t=crypto.getRandomValues(new Uint8Array(16));return this.arrayBufferToBase64(t)}arrayBufferToBase64(t){const s=new Uint8Array(t);let a="";for(let r=0;r<s.byteLength;r++)a+=String.fromCharCode(s[r]);return btoa(a)}base64ToArrayBuffer(t){const s=atob(t),a=new Uint8Array(s.length);for(let r=0;r<s.length;r++)a[r]=s.charCodeAt(r);return a}isSupported(){return!!(window.crypto&&window.crypto.subtle)}restoreFromSession(){try{const t=sessionStorage.getItem("e2ee_session");if(t){const s=JSON.parse(t);if(s.timestamp&&Date.now()-s.timestamp<24*60*60*1e3)return this.isInitialized=!0,this.userSalt=s.salt,console.log("üîí E2EE state restored from session storage"),!0}return!1}catch(t){return console.warn("Failed to restore E2EE session:",t),!1}}getStatus(){var t;return{initialized:this.isInitialized,pfsEnabled:this.pfsEnabled,sessionId:this.sessionId,lastKeyRotation:(t=this.sessionKeys)==null?void 0:t.timestamp,autoMode:this.autoMode,encryptionMode:this.encryptionMode,networkSpeed:this.networkSpeed,performanceThreshold:this.performanceThreshold,performanceHistory:this.performanceHistory}}startPerformanceMonitoring(){setInterval(()=>{this.checkNetworkPerformance()},3e4),this.checkNetworkPerformance()}async checkNetworkPerformance(){try{const t=performance.now(),s=await fetch("/api/health",{method:"GET",cache:"no-cache"}),r=performance.now()-t;this.performanceHistory.push(r),this.performanceHistory.length>10&&this.performanceHistory.shift();const d=this.performanceHistory.reduce((x,w)=>x+w,0)/this.performanceHistory.length;d<200?this.networkSpeed="excellent":d<500?this.networkSpeed="good":d<1e3?this.networkSpeed="fair":this.networkSpeed="poor",this.autoMode&&await this.autoSwitchEncryptionMode(d),console.log(`üåê Network performance: ${this.networkSpeed} (${d.toFixed(0)}ms)`)}catch(t){console.warn("Network performance check failed:",t),this.networkSpeed="unknown"}}async autoSwitchEncryptionMode(t){const s=this.encryptionMode;let a=s;t>this.performanceThreshold&&s==="e2ee"?(a="tls",console.log("üîÑ Auto-switching to TLS for better performance"),this.notifyEncryptionModeChange("e2ee","tls","Network is slow - switching to standard encryption for better performance")):t<=this.performanceThreshold/2&&s==="tls"&&(a="e2ee",console.log("üîÑ Auto-switching back to E2EE - performance improved"),this.notifyEncryptionModeChange("tls","e2ee","Network performance improved - switching back to end-to-end encryption")),a!==s&&(this.encryptionMode=a,this.notifyStatusChange())}notifyEncryptionModeChange(t,s,a){window.dispatchEvent(new CustomEvent("encryptionModeChange",{detail:{fromMode:t,toMode:s,reason:a,timestamp:Date.now()}}))}onStatusChange(t){this.statusCallbacks.push(t)}notifyStatusChange(){const t=this.getStatus();this.statusCallbacks.forEach(s=>{try{s(t)}catch(a){console.warn("Status callback error:",a)}})}}const $=new yt,Qe=l.createContext(),J=()=>{const n=l.useContext(Qe);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},pt=({children:n})=>{const[t,s]=l.useState(null),[a,r]=l.useState(!0),[d,x]=l.useState(null),[w,p]=l.useState({supported:!1,initialized:!1,error:null});l.useEffect(()=>{const c=localStorage.getItem("token");c?(D.defaults.headers.common.Authorization=`Bearer ${c}`,g()):r(!1)},[]),l.useEffect(()=>{console.log("üîç Checking E2EE support...");const c=$.isSupported();console.log("‚úÖ E2EE support check result:",c),p(j=>({...j,supported:c})),c?console.log("‚úÖ E2EE is supported in this browser"):console.warn("‚ö†Ô∏è E2EE not supported in this browser.")},[]);const g=async()=>{try{const j=(await D.get("/api/auth/me")).data.user;if(s(j),j.salt&&w.supported){console.log("üîí E2EE requires re-initialization for security - user must re-enter password"),p(M=>({...M,initialized:!1,error:null})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showE2EEModal"))},100);return}}catch(c){console.error("Auth check failed:",c),b()}finally{r(!1)}},v=async(c,j)=>{try{if(console.log("üîí Starting E2EE initialization with salt:",j?"Present":"Missing"),!c||!j)throw new Error("Password and salt are required for E2EE initialization");if(console.log("üîê Initializing E2EE service..."),await $.initialize(c,j)){p(R=>({...R,initialized:!0,error:null}));const z={timestamp:Date.now(),userId:t==null?void 0:t.id,salt:j};sessionStorage.setItem("e2ee_session",JSON.stringify(z)),console.log("‚úÖ E2EE initialized successfully and session stored")}else p(z=>({...z,initialized:!0,error:"E2EE initialization failed - using TLS fallback"})),console.log("‚ö†Ô∏è E2EE initialization failed - using TLS fallback")}catch(M){throw console.error("‚ùå E2EE initialization failed:",M),p(z=>({...z,error:"E2EE initialization failed"})),M}},u=async(c,j)=>{try{if(console.log("üîí Manual E2EE initialization started"),!c||!j)throw new Error("Password and salt are required");return await $.initialize(c,j),p(M=>({...M,initialized:!0,error:null})),console.log("‚úÖ Manual E2EE initialization successful"),{success:!0}}catch(M){return console.error("‚ùå Manual E2EE initialization failed:",M),p(z=>({...z,error:M.message})),{success:!1,error:M.message}}},N=async c=>{var j,M,z;try{x(null),console.log("üîê Attempting login with:",c.username);const R=await D.post("/api/auth/login",c);console.log("üì° API Response received:",R.status,R.data);const{token:F,user:o}=R.data;if(console.log("üîë Token extracted:",F?"Present":"Missing"),console.log("üë§ User data extracted:",o),localStorage.setItem("token",F),D.defaults.headers.common.Authorization=`Bearer ${F}`,s(o),console.log("‚úÖ User state updated:",o.username),o.salt&&$&&$.isSupported()){console.log("üîí Automatically initializing E2EE service..."),console.log("üîë User salt:",o.salt?"Present":"Missing"),console.log("üåê E2EE supported:",$.isSupported());try{await v(c.password,o.salt),console.log("‚úÖ E2EE automatically initialized successfully")}catch(T){console.warn("‚ö†Ô∏è E2EE initialization failed, continuing without encryption:",T)}}else console.log("‚ÑπÔ∏è E2EE not available or not needed"),o.salt||console.log("‚ö†Ô∏è User has no salt for E2EE initialization"),$.isSupported()||console.log("‚ö†Ô∏è E2EE not supported in this browser");return console.log("üéâ Login function completed successfully, returning success"),{success:!0}}catch(R){const F=((M=(j=R.response)==null?void 0:j.data)==null?void 0:M.error)||"Login failed";return console.error("‚ùå Login error:",F),console.error("üîç Full error details:",(z=R.response)==null?void 0:z.data),x(F),{success:!1,error:F}}},b=()=>{localStorage.removeItem("token"),sessionStorage.removeItem("e2ee_session"),delete D.defaults.headers.common.Authorization,s(null),x(null),$&&$.cleanup(),p(c=>({...c,initialized:!1})),console.log("üö™ User logged out and E2EE cleaned up")},P={user:t,loading:a,error:d,login:N,logout:b,register:async c=>{var j,M;try{const z=await D.post("/api/auth/register",c),{token:R,user:F}=z.data;if(localStorage.setItem("token",R),D.defaults.headers.common.Authorization=`Bearer ${R}`,s(F),w.supported){const o=$.generateSalt();await D.post("/api/auth/update-salt",{salt:o})}return{success:!0}}catch(z){const R=((M=(j=z.response)==null?void 0:j.data)==null?void 0:M.error)||"Registration failed";return console.error("Registration error:",R),{success:!1,error:R}}},updateProfile:async c=>{var j,M;try{const R=(await D.put("/api/auth/profile",c)).data.user;return s(R),{success:!0}}catch(z){const R=((M=(j=z.response)==null?void 0:j.data)==null?void 0:M.error)||"Profile update failed";return console.error("Profile update error:",R),{success:!1,error:R}}},e2eeStatus:w,e2eeService:w.initialized?$:null,initializeE2EEManually:u,needsE2EEReinit:()=>t&&w.supported&&!w.initialized};return e.jsx(Qe.Provider,{value:P,children:n})},Je=l.createContext(),Ye=()=>{const n=l.useContext(Je);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},bt=({children:n})=>{const[t,s]=l.useState(()=>{const x=localStorage.getItem("mohr-theme");return x?x==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),a=()=>{s(x=>!x)},r=x=>{s(x==="dark")};l.useEffect(()=>{localStorage.setItem("mohr-theme",t?"dark":"light");const x=document.documentElement;t?x.classList.add("dark"):x.classList.remove("dark")},[t]);const d={isDarkMode:t,toggleTheme:a,setTheme:r,theme:t?"dark":"light"};return e.jsx(Je.Provider,{value:d,children:n})};class ft{constructor(){this.isEmergencyMode=!1,this.setupEmergencyTriggers()}setupEmergencyTriggers(){document.addEventListener("keydown",t=>{t.ctrlKey&&t.shiftKey&&t.key==="E"&&(t.preventDefault(),this.triggerEmergencyLogout())}),this.setupTripleClickTrigger()}setupTripleClickTrigger(){let t=0,s=null;document.addEventListener("click",a=>{(a.target.closest('[data-emergency-trigger="true"]')||a.target.closest(".app-logo")||a.target.closest(".app-title"))&&(t++,s&&clearTimeout(s),s=setTimeout(()=>{t>=3&&this.triggerEmergencyLogout(),t=0},1e3))})}async triggerEmergencyLogout(){if(!this.isEmergencyMode){this.isEmergencyMode=!0;try{console.log("üö® EMERGENCY LOGOUT TRIGGERED - Purging all data..."),this.showEmergencyNotification(),await this.purgeAllData(),await this.clearAllCaches(),await this.clearServiceWorker(),this.clearAllStorage(),this.clearAllCookies(),this.redirectToSafeLogout()}catch(t){console.error("Emergency logout error:",t),this.redirectToSafeLogout()}}}showEmergencyNotification(){const t=document.createElement("div");t.id="emergency-notification",t.innerHTML=`
      <div style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(220, 38, 38, 0.95);
        color: white;
        z-index: 999999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 20px;
      ">
        <div style="font-size: 48px; margin-bottom: 20px;">üö®</div>
        <h1 style="font-size: 24px; margin-bottom: 10px;">EMERGENCY LOGOUT</h1>
        <p style="font-size: 16px; margin-bottom: 20px;">
          All data is being purged from your device...
        </p>
        <div style="
          width: 50px;
          height: 50px;
          border: 4px solid white;
          border-top: 4px solid transparent;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        "></div>
        <style>
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
      </div>
    `,document.body.appendChild(t)}async purgeAllData(){const t=[()=>{localStorage.clear(),console.log("‚úÖ localStorage cleared")},()=>{sessionStorage.clear(),console.log("‚úÖ sessionStorage cleared")},async()=>{try{const s=await window.indexedDB.databases();for(const a of s)window.indexedDB.deleteDatabase(a.name);console.log("‚úÖ IndexedDB cleared")}catch(s){console.warn("IndexedDB clear failed:",s)}},async()=>{try{const s=await caches.keys();await Promise.all(s.map(a=>caches.delete(a))),console.log("‚úÖ Cache Storage cleared")}catch(s){console.warn("Cache Storage clear failed:",s)}},()=>{try{window.networkService&&window.networkService.clearOfflineData(),console.log("‚úÖ Network Service data cleared")}catch(s){console.warn("Network Service clear failed:",s)}},()=>{try{["e2ee_salt","e2ee_key","user_encryption_data","auth_token","user_data"].forEach(a=>{localStorage.removeItem(a),sessionStorage.removeItem(a)}),console.log("‚úÖ E2EE data cleared")}catch(s){console.warn("E2EE clear failed:",s)}}];for(const s of t)try{await s()}catch(a){console.warn("Purge task failed:",a)}}async clearAllCaches(){try{if("caches"in window){const t=await caches.keys();await Promise.all(t.map(s=>caches.delete(s)))}if("serviceWorker"in navigator){const t=await navigator.serviceWorker.getRegistrations();await Promise.all(t.map(s=>s.unregister()))}console.log("‚úÖ All caches cleared")}catch(t){console.warn("Cache clear failed:",t)}}async clearServiceWorker(){try{if("serviceWorker"in navigator){const t=await navigator.serviceWorker.getRegistrations();for(const s of t)await s.unregister();console.log("‚úÖ Service Worker cleared")}}catch(t){console.warn("Service Worker clear failed:",t)}}clearAllStorage(){try{localStorage.clear(),sessionStorage.clear(),window.webkitStorageInfo&&window.webkitStorageInfo.queryUsageAndQuota(window.webkitStorageInfo.TEMPORARY,(t,s)=>{}),console.log("‚úÖ All storage cleared")}catch(t){console.warn("Storage clear failed:",t)}}clearAllCookies(){try{const t=document.cookie.split(";");for(const s of t){const a=s.indexOf("="),r=a>-1?s.substr(0,a):s;document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`}console.log("‚úÖ All cookies cleared")}catch(t){console.warn("Cookie clear failed:",t)}}redirectToSafeLogout(){const t=document.getElementById("emergency-notification");t&&t.remove(),setTimeout(()=>{window.location.href="/emergency-logout"},1e3)}async manualEmergencyLogout(){confirm(`üö® EMERGENCY LOGOUT

This will immediately purge ALL data from your device and log you out.

Are you sure you want to continue?`)&&await this.triggerEmergencyLogout()}getStatus(){return{isEmergencyMode:this.isEmergencyMode,triggers:{keyboard:"Ctrl+Shift+E",tripleClick:"Triple-click app logo"}}}}const jt=new ft,Fe=({size:n=24,className:t="",...s})=>e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...s,children:[e.jsx("circle",{cx:"12",cy:"14",r:"6",fill:"#dc2626"}),e.jsx("circle",{cx:"10.5",cy:"12",r:"2.5",fill:"#ef4444",opacity:"0.6"}),e.jsx("path",{d:"M9 20 L15 20 L13.5 24 L10.5 24 Z",fill:"#f5f5dc"}),e.jsx("path",{d:"M9.75 20 L14.25 20 L13 22.5 L11 22.5 Z",fill:"#fafafa"}),e.jsx("path",{d:"M15 7.5 Q16.5 6 18 7.5 Q16.5 9 15 7.5",fill:"#16a34a"}),e.jsx("path",{d:"M13.5 7.5 Q15 6 16.5 7.5 Q15 9 13.5 7.5",fill:"#22c55e"}),e.jsx("path",{d:"M12 7.5 Q13.5 6 15 7.5 Q13.5 9 12 7.5",fill:"#15803d"}),e.jsx("path",{d:"M15 7.5 Q15.75 6.75 16.5 7.5",stroke:"#15803d",strokeWidth:"0.5",fill:"none"}),e.jsx("path",{d:"M13.5 7.5 Q14.25 6.75 15 7.5",stroke:"#15803d",strokeWidth:"0.5",fill:"none"}),e.jsx("path",{d:"M12 7.5 Q12.75 6.75 13.5 7.5",stroke:"#15803d",strokeWidth:"0.5",fill:"none"})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),S=(n,t)=>{const s=l.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:x,className:w="",children:p,...g},v)=>l.createElement("svg",{ref:v,...wt,width:r,height:r,stroke:a,strokeWidth:x?Number(d)*24/Number(r):d,className:["lucide",`lucide-${vt(n)}`,w].join(" "),...g},[...t.map(([u,N])=>l.createElement(u,N)),...Array.isArray(p)?p:[p]]));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=S("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=S("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=S("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=S("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=S("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=S("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=S("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=S("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=S("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=S("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=S("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=S("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=S("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=S("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=S("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=S("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=S("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=S("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=S("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=S("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=S("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=S("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=S("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=S("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=S("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=S("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=S("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=S("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=S("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=S("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=S("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=S("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=S("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=S("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=S("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=S("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=S("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=S("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=S("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=S("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=S("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=S("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=S("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=S("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=S("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=S("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=S("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=S("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=S("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=S("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=S("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=S("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=S("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=S("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=S("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=S("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ut=()=>{const{e2eeStatus:n,needsE2EEReinit:t}=J(),[s,a]=l.useState({mode:"unknown",networkSpeed:"unknown",autoMode:!0,initialized:!1}),[r,d]=l.useState(!1),[x,w]=l.useState(null),[p,g]=l.useState(new Date);l.useEffect(()=>{v();const c=M=>{const{fromMode:z,toMode:R,reason:F}=M.detail;w({type:"info",title:"Encryption Mode Changed",message:F,fromMode:z,toMode:R}),d(!0),setTimeout(()=>{d(!1)},5e3),v()},j=()=>{v()};return window.addEventListener("encryptionModeChange",c),$.onStatusChange(j),()=>{window.removeEventListener("encryptionModeChange",c)}},[]);const v=()=>{const c=$.getStatus();a({mode:c.encryptionMode||"unknown",networkSpeed:c.networkSpeed||"unknown",autoMode:c.autoMode!==!1,initialized:c.initialized||!1}),g(new Date)},u=()=>{if(!s.initialized)return e.jsx(Ne,{className:"w-5 h-5 text-red-500 animate-pulse"});switch(s.mode){case"e2ee":return e.jsx(et,{className:"w-5 h-5 text-green-500 animate-pulse"});case"tls":return e.jsx(H,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(Ne,{className:"w-5 h-5 text-red-500 animate-pulse"})}},N=()=>{if(!s.initialized)return"üîí REINIT REQUIRED";switch(s.mode){case"e2ee":return"E2EE Active";case"tls":return"TLS Active";default:return"üîí REINIT REQUIRED"}},b=()=>{if(!s.initialized)return"text-red-600 bg-red-50 border-red-300 hover:bg-red-100 transition-colors animate-pulse";switch(s.mode){case"e2ee":return"text-green-600 bg-green-50 border-green-200 hover:bg-green-100 transition-colors";case"tls":return"text-blue-600 bg-blue-50 border-blue-200 hover:bg-blue-100 transition-colors";default:return"text-red-600 bg-red-50 border-red-300 hover:bg-red-100 transition-colors animate-pulse"}},E=()=>{switch(s.networkSpeed){case"excellent":return e.jsx(Y,{className:"w-4 h-4 text-green-500"});case"good":return e.jsx(Y,{className:"w-4 h-4 text-blue-500"});case"fair":return e.jsx(Y,{className:"w-4 h-4 text-yellow-500"});case"poor":return e.jsx(Ce,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Y,{className:"w-4 h-4 text-gray-400"})}},f=()=>{if(!s.initialized)return`‚ö†Ô∏è SECURITY ALERT

End-to-end encryption requires re-initialization.

Your application was reopened from a URL.
For maximum security, please re-enter your password.

Click to open security modal.`;const c=s.mode==="e2ee"?"End-to-End Encryption (Maximum Security)":"Transport Layer Security (Standard Security)",j=`Network Speed: ${s.networkSpeed}`,M=s.autoMode?"Auto-switching enabled":"Manual mode",z=`Last updated: ${p.toLocaleTimeString()}`;return`${c}
${j}
${M}
${z}`},P=()=>{t()&&window.dispatchEvent(new CustomEvent("showE2EEModal"))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg border text-sm font-medium cursor-pointer transition-all duration-200 hover:shadow-md ${b()}`,title:f(),onClick:P,children:[u(),e.jsx("span",{children:N()}),s.autoMode&&e.jsxs("div",{className:"flex items-center space-x-1",children:[E(),e.jsx("span",{className:"text-xs opacity-75",children:s.networkSpeed})]})]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-pre-line z-50 max-w-xs",children:[f(),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),r&&x&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in slide-in-from-right duration-300",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:x.type==="info"?e.jsx(pe,{className:"w-5 h-5 text-blue-500"}):x.type==="warning"?e.jsx(le,{className:"w-5 h-5 text-yellow-500"}):e.jsx(U,{className:"w-5 h-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:x.message}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:`px-2 py-1 rounded ${x.fromMode==="e2ee"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:x.fromMode.toUpperCase()}),e.jsx("span",{children:"‚Üí"}),e.jsx("span",{className:`px-2 py-1 rounded ${x.toMode==="e2ee"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:x.toMode.toUpperCase()})]})]}),e.jsx("button",{onClick:()=>d(!1),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})]})},Kt=()=>{var N;const[n,t]=l.useState(!1),{user:s,logout:a}=J(),{isDarkMode:r,toggleTheme:d}=Ye(),x=rt(),w=fe(),p=[{name:"Dashboard",href:"/",icon:Mt},{name:"Employees",href:"/employees",icon:ie},{name:"Onboarding",href:"/onboarding",icon:we},{name:"Approvals",href:"/approvals",icon:U},{name:"Backup",href:"/backup",icon:H},{name:"Leave Management",href:"/leave",icon:ce},{name:"Documents",href:"/documents",icon:ye},{name:"Privileges",href:"/privileges",icon:H},{name:"Myanmar Security",href:"/myanmar-security",icon:Xe},{name:"Profile",href:"/profile",icon:Ee},{name:"Advanced Security",href:"/advanced-security",icon:H}],g=()=>{a(),w("/login")},v=()=>{jt.manualEmergencyLogout()},u=b=>x.pathname===b;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${n?"block":"hidden"}`,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",onClick:()=>t(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white dark:bg-gray-800 shadow-xl",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white cursor-pointer app-title flex items-center","data-emergency-trigger":"true",title:"Triple-click for emergency logout",children:[e.jsx(Fe,{size:32,className:"mr-3"}),"Hot Radish"]}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100",children:e.jsx(Bt,{size:24})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:p.map(b=>{const E=b.icon;return e.jsxs(Re,{to:b.href,className:`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${u(b.href)?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,onClick:()=>t(!1),children:[e.jsx(E,{size:20,className:"mr-3"}),b.name]},b.name)})}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-4 space-y-2 mb-8",children:e.jsxs("button",{onClick:g,className:"flex w-full items-center px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white rounded-md transition-colors",children:[e.jsx(Le,{size:20,className:"mr-3"}),"Logout"]})})]})]}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex h-16 items-center px-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white cursor-pointer app-title flex items-center","data-emergency-trigger":"true",title:"Triple-click for emergency logout",children:[e.jsx(Fe,{size:32,className:"mr-3"}),"Hot Radish"]})}),e.jsx("nav",{className:"flex-1 px-6 py-6 space-y-2",children:p.map(b=>{const E=b.icon;return e.jsxs(Re,{to:b.href,className:`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${u(b.href)?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(E,{size:20,className:"mr-3"}),b.name]},b.name)})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-6 py-4 space-y-2 mb-8",children:[e.jsxs("button",{onClick:g,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white rounded-md transition-colors",children:[e.jsx(Le,{size:20,className:"mr-3"}),"Logout"]}),e.jsxs("button",{onClick:v,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:[e.jsx(Le,{size:20,className:"mr-3"}),"Logout"]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[e.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 dark:text-gray-300 lg:hidden",onClick:()=>t(!0),children:e.jsx(_t,{size:24})}),e.jsx("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:e.jsxs("div",{className:"relative flex flex-1 items-center",children:[e.jsx(Se,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 dark:text-gray-500 ml-3"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"block h-full w-full border-0 py-0 pl-10 pr-0 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 bg-transparent focus:ring-0 sm:text-sm"})]})}),e.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100 transition-colors",onClick:d,children:r?e.jsx(Rt,{size:24}):e.jsx(At,{size:24})}),e.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-100",children:e.jsx(Ae,{size:24})}),e.jsx(Ut,{}),e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsxs("div",{className:"hidden sm:flex sm:flex-col sm:items-end",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(s==null?void 0:s.name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(s==null?void 0:s.role)||"Employee"})]}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:((N=s==null?void 0:s.name)==null?void 0:N.charAt(0))||"U"})})]})]})]}),e.jsx("main",{className:"py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx(nt,{})})})]})]})},Ht=()=>{const[n,t]=l.useState({username:"",password:""}),[s,a]=l.useState(!1),[r,d]=l.useState(!1),[x,w]=l.useState(""),{login:p}=J(),{isDarkMode:g,toggleTheme:v}=Ye(),u=fe(),N=async E=>{var f,P;E.preventDefault(),d(!0),w("");try{console.log("üîç Login component: Calling login function...");const c=await p(n);console.log("üîç Login component: Received result:",c),c.success?(console.log("‚úÖ Login component: Login successful, navigating to /"),u("/")):(console.log("‚ùå Login component: Login failed:",c.error),w(c.error||"Login failed"))}catch(c){console.error("Login error:",c),w(((P=(f=c.response)==null?void 0:f.data)==null?void 0:P.error)||"Login failed. Please try again.")}finally{d(!1)}},b=E=>{const{name:f,value:P}=E.target;t(c=>({...c,[f]:P}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("ellipse",{cx:"12",cy:"16",rx:"4",ry:"6",fill:"currentColor"}),e.jsx("path",{d:"M8 12 Q12 8 16 12 Q14 10 12 10 Q10 10 8 12",fill:"currentColor"})]})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to Hot Radish"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your account to continue"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-6 shadow-lg rounded-lg",children:[e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[x&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(Z,{className:"h-5 w-5 text-red-400 dark:text-red-300 flex-shrink-0"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:x})})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:n.username,onChange:b,className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"Enter your username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ne,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:n.password,onChange:b,className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!s),children:s?e.jsx(Ze,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}):e.jsx(de,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Demo Credentials:"}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," admin"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Password:"})," admin123"]})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"¬© 2024 Hot Radish. All rights reserved."})})]})})},Wt=()=>{const n=fe(),{user:t}=J(),[s,a]=l.useState({totalEmployees:0,activeEmployees:0,pendingLeave:0,approvedLeave:0}),[r,d]=l.useState([]),[x,w]=l.useState(!0),[p,g]=l.useState(null);l.useEffect(()=>{v()},[]);const v=async()=>{try{w(!0),g(null);const b=await D.get("/api/auth/dashboard-stats"),{stats:E,recentActivity:f}=b.data;a(E),d(f)}catch(b){console.error("Failed to fetch dashboard data:",b),g("Failed to load dashboard data"),a({totalEmployees:0,activeEmployees:0,pendingLeave:0,approvedLeave:0}),d([])}finally{w(!1)}},u=({title:b,value:E,icon:f,change:P,changeType:c})=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:b}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:E}),P&&e.jsxs("div",{className:"flex items-center mt-2",children:[c==="up"?e.jsx(tt,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(Ft,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${c==="up"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:P})]})]}),e.jsx("div",{className:"h-12 w-12 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"h-6 w-6 text-primary-600 dark:text-primary-400"})})]})}),N=({activity:b})=>{const E=()=>{switch(b.type){case"leave_request":return e.jsx(se,{className:"h-4 w-4 text-yellow-500"});case"leave_approved":return e.jsx(U,{className:"h-4 w-4 text-green-500"});case"employee_added":return e.jsx(ie,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(Z,{className:"h-4 w-4 text-gray-500"})}};return e.jsxs("div",{className:"flex items-start space-x-3 py-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:E()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:b.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:b.time})]})]})};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:["Welcome back, ",(t==null?void 0:t.name)||"User","! Here's what's happening today."]})]}),p&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center text-red-800 dark:text-red-200",children:[e.jsx(Z,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:p})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(u,{title:"Total Employees",value:s.totalEmployees,icon:ie}),e.jsx(u,{title:"Active Employees",value:s.activeEmployees,icon:ie}),e.jsx(u,{title:"Pending Leave",value:s.pendingLeave,icon:se}),e.jsx(u,{title:"Approved Leave",value:s.approvedLeave,icon:ce})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Activity"})}),e.jsx("div",{className:"px-6 py-4",children:r.length>0?e.jsx("div",{className:"space-y-1",children:r.map(b=>e.jsx(N,{activity:b},b.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent activity"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full btn btn-primary btn-md",onClick:()=>n("/onboarding"),children:"Add New Employee"}),e.jsx("button",{className:"w-full btn btn-outline btn-md",onClick:()=>n("/leave"),children:"View Leave Requests"}),e.jsx("button",{className:"w-full btn btn-outline btn-md",onClick:()=>n("/documents"),children:"Generate Report"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Today's Overview"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Employees Present"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.activeEmployees,"/",s.totalEmployees]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Leave Requests"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.pendingLeave," pending"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"System Status"}),e.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Online"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Database"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:"Online"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"API"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:"Online"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Backup"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:"Complete"})]})]})]})]})]})},Vt=n=>{if(!n)return null;const t=new Date,s=new Date(n);let a=t.getFullYear()-s.getFullYear();const r=t.getMonth()-s.getMonth();return(r<0||r===0&&t.getDate()<s.getDate())&&a--,a},Gt=()=>{const n=fe(),[t,s]=l.useState([]),[a,r]=l.useState(!0),[d,x]=l.useState(""),[w,p]=l.useState(null),[g,v]=l.useState(null),[u,N]=l.useState(!1),[b,E]=l.useState(!1),[f,P]=l.useState(!1),{e2eeService:c,e2eeStatus:j}=J();l.useEffect(()=>{M()},[]);const M=async()=>{try{r(!0),p(null);const k=(await D.get("/api/employees")).data;if(c&&j.initialized){const B=await Promise.all(k.map(async W=>{try{const y=await c.decryptEmployee(W);return{...W,...y,isEncrypted:!0}}catch(y){return console.error("Failed to decrypt employee:",y),{...W,isEncrypted:!1,decryptionError:!0}}}));s(B)}else s(k.map(B=>({...B,isEncrypted:!1})))}catch(h){console.error("Failed to fetch employees:",h),p("Failed to load employees")}finally{r(!1)}},z=h=>{v(h),N(!0)},R=h=>{v(h),E(!0)},F=h=>{v(h),P(!0)},o=async()=>{if(g)try{await D.delete(`/api/employees/${g.id}`),s(t.filter(h=>h.id!==g.id)),P(!1),v(null)}catch(h){console.error("Failed to delete employee:",h),p("Failed to delete employee")}},T=t.filter(h=>{const k=d.toLowerCase();return h.first_name&&h.first_name.toLowerCase().includes(k)||h.last_name&&h.last_name.toLowerCase().includes(k)||h.position&&h.position.toLowerCase().includes(k)||h.department&&h.department.toLowerCase().includes(k)||h.employee_id&&h.employee_id.toLowerCase().includes(k)||h.nationality&&h.nationality.toLowerCase().includes(k)||h.employment_type&&h.employment_type.toLowerCase().includes(k)||h.education_qualifications&&h.education_qualifications.toLowerCase().includes(k)||h.job_description&&h.job_description.toLowerCase().includes(k)||h.relevant_experience&&h.relevant_experience.toLowerCase().includes(k)}),A=({isEncrypted:h,hasError:k})=>k?e.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400",children:[e.jsx(H,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Decryption Error"})]}):h?e.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx(ne,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Encrypted"})]}):e.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[e.jsx(ze,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Unencrypted"})]});return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Employees"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage your organization's employees"}),j.initialized&&e.jsxs("div",{className:"flex items-center mt-2 text-green-600 dark:text-green-400",children:[e.jsx(H,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"End-to-End Encryption Active"})]})]}),e.jsxs("button",{className:"btn btn-primary btn-md mt-4 sm:mt-0 hover:bg-primary-700 active:bg-primary-800 transition-colors",onClick:()=>n("/onboarding"),children:[e.jsx(re,{className:"h-4 w-4 mr-2 flex-shrink-0"}),"Add Employee"]})]}),w&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center text-red-800 dark:text-red-200",children:[e.jsx(H,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:w})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500 flex-shrink-0"}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:d,onChange:h=>x(h.target.value),className:"input pl-10 w-full"})]})}),e.jsxs("button",{className:"btn btn-outline btn-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(St,{className:"h-4 w-4 mr-2 flex-shrink-0"}),"Filter"]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Age/Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Job Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Nationality"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Employment Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Education"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Experience"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Security"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:T.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-primary-800 dark:text-primary-200",children:[h.first_name?h.first_name.charAt(0):"?",h.last_name?h.last_name.charAt(0):"?"]})})}),e.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:h.first_name&&h.last_name?`${h.first_name} ${h.last_name}`:h.employee_id||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:h.employee_id})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(()=>{const k=h.age||Vt(h.date_of_birth);return k&&h.gender?`${k}/${h.gender}`:"N/A"})()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsx("div",{className:"max-w-xs truncate",title:h.position||"N/A",children:h.position||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsx("div",{className:"max-w-xs truncate",title:h.job_description||"N/A",children:h.job_description||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:h.nationality||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h.employment_type==="Full-time"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":h.employment_type==="Part-time"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:h.employment_type||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsx("div",{className:"max-w-xs truncate",title:h.education_qualifications||"N/A",children:h.education_qualifications||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsx("div",{className:"max-w-xs truncate",title:h.relevant_experience||"N/A",children:h.relevant_experience||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h.is_active?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:h.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(A,{isEncrypted:h.isEncrypted,hasError:h.decryptionError})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",title:"View Employee",onClick:()=>z(h),children:[e.jsx(de,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs("button",{className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",title:"Edit Employee",onClick:()=>R(h),children:[e.jsx(ue,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Delete Employee",onClick:()=>F(h),children:[e.jsx(ee,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},h.id))})]})}),T.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:d?"No employees found matching your search.":"No employees found."})})]}),u&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Employee Details"}),e.jsxs("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[g.first_name," ",g.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Employee ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Position"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.position||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Department"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.department||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Age/Gender"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.age&&g.gender?`${g.age}/${g.gender}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nationality"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.nationality||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Employment Type"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.employment_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.is_active?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:g.is_active?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Job Description"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.job_description||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Education Qualifications"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.education_qualifications||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Relevant Experience"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.relevant_experience||"N/A"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>N(!1),className:"btn btn-outline btn-md",children:"Close"})})]})}),b&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit Employee"}),e.jsxs("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Edit functionality is coming soon! This will include a full form for updating employee details."})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[g.first_name," ",g.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Employee ID"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Position"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.position||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Department"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:g.department||"N/A"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"btn btn-outline btn-md",children:"Cancel"}),e.jsx("button",{onClick:()=>{alert("Edit functionality coming soon!"),E(!1)},className:"btn btn-primary btn-md",disabled:!0,children:"Save Changes"})]})]})}),f&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ee,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Delete Employee"})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Are you sure you want to delete ",e.jsxs("strong",{children:[g.first_name," ",g.last_name]}),"? This action cannot be undone."]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"btn btn-outline btn-md",children:"Cancel"}),e.jsx("button",{onClick:o,className:"btn bg-red-600 hover:bg-red-700 text-white btn-md",children:"Delete"})]})]})})]})},Qt=()=>{const[n,t]=l.useState([]),[s,a]=l.useState(!0),[r,d]=l.useState(!1);l.useEffect(()=>{setTimeout(()=>{t([{id:1,employeeName:"John Doe",leaveType:"Annual Leave",startDate:"2024-01-15",endDate:"2024-01-17",daysRequested:3,reason:"Family vacation",status:"pending",submittedAt:"2024-01-10"},{id:2,employeeName:"Jane Smith",leaveType:"Sick Leave",startDate:"2024-01-12",endDate:"2024-01-12",daysRequested:1,reason:"Not feeling well",status:"approved",submittedAt:"2024-01-11"}]),a(!1)},1e3)},[]);const x=()=>{d(!0)},w=u=>{t(N=>N.map(b=>b.id===u?{...b,status:"approved"}:b))},p=u=>{t(N=>N.map(b=>b.id===u?{...b,status:"rejected"}:b))},g=u=>{switch(u){case"approved":return e.jsx(U,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(ve,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(se,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Z,{className:"h-4 w-4 text-gray-500"})}},v=u=>{switch(u){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Leave Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage employee leave requests"})]}),e.jsxs("button",{className:"btn btn-primary btn-md mt-4 sm:mt-0",onClick:x,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"New Leave Request"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Leave Requests"})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(u=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.employeeName}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${v(u.status)}`,children:[g(u.status),e.jsx("span",{className:"ml-1",children:u.status})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:u.leaveType}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),new Date(u.startDate).toLocaleDateString()," - ",new Date(u.endDate).toLocaleDateString()]}),e.jsxs("span",{children:[u.daysRequested," days"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:u.reason})]}),e.jsx("div",{className:"flex space-x-2",children:u.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>w(u.id),children:"Approve"}),e.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>p(u.id),children:"Reject"})]})})]})},u.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Requests"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"3"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved This Month"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"12"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected This Month"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Leave Types"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Annual Leave"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"20 days"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sick Leave"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"10 days"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Personal Leave"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"5 days"})]})]})]})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"New Leave Request"}),e.jsxs("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Leave request functionality is coming soon! This will include a full form for submitting new leave requests."})]})})}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:()=>d(!1),className:"btn btn-outline btn-md",children:"Close"})})]})})]})},Jt=()=>{const{user:n}=J(),[t,s]=l.useState(!0),[a,r]=l.useState([]),[d,x]=l.useState([]),[w,p]=l.useState([]),[g,v]=l.useState("levels"),[u,N]=l.useState(!1),[b,E]=l.useState(!1),[f,P]=l.useState(null),[c,j]=l.useState({level_number:"",name:"",description:"",permissions:[]}),M=[{value:"employees",label:"Employees",icon:ie},{value:"leave_requests",label:"Leave Requests",icon:ce},{value:"users",label:"Users",icon:Ot},{value:"departments",label:"Departments",icon:te},{value:"privileges",label:"Privileges",icon:je},{value:"google_docs",label:"Google Docs",icon:ye},{value:"google_sheets",label:"Google Sheets",icon:It},{value:"google_calendar",label:"Google Calendar",icon:ce},{value:"google_drive",label:"Google Drive",icon:Et},{value:"audit_log",label:"Audit Log",icon:H},{value:"system",label:"System",icon:te}],z=[{value:"read",label:"Read",icon:de},{value:"write",label:"Write",icon:ue},{value:"create",label:"Create",icon:re},{value:"update",label:"Update",icon:ue},{value:"delete",label:"Delete",icon:ee},{value:"approve",label:"Approve",icon:U},{value:"admin",label:"Admin",icon:te}],R=[{value:"own",label:"Own",description:"User's own data only"},{value:"department",label:"Department",description:"Department-level access"},{value:"all",label:"All",description:"Organization-wide access"}];l.useEffect(()=>{F()},[]);const F=async()=>{var y;try{s(!0);const C=await D.get("/api/privileges/all-levels");r(C.data.all_levels),x(C.data.all_levels.filter(q=>q.type==="custom"));const L=await D.get("/api/privileges/templates");p(L.data.templates)}catch(C){console.error("Error fetching privilege data:",C),((y=C.response)==null?void 0:y.status)===401&&alert("Authentication required. Please log in again.")}finally{s(!1)}},o=async y=>{var C,L;y.preventDefault();try{const q=await D.post("/api/privileges/custom-levels",c);N(!1),j({level_number:"",name:"",description:"",permissions:[]}),F(),alert("Custom privilege level created successfully!")}catch(q){console.error("Error creating custom level:",q),(L=(C=q.response)==null?void 0:C.data)!=null&&L.error?alert(`Error: ${q.response.data.error}`):alert("Error creating custom level")}},T=async y=>{var C,L;if(confirm(`Are you sure you want to delete Level ${y}?`))try{await D.delete(`/api/privileges/custom-levels/${y}`),F(),alert("Custom privilege level deleted successfully!")}catch(q){console.error("Error deleting custom level:",q),(L=(C=q.response)==null?void 0:C.data)!=null&&L.error?alert(`Error: ${q.response.data.error}`):alert("Error deleting custom level")}},A=()=>{j(y=>({...y,permissions:[...y.permissions,{resource_type:"",action:"",scope:""}]}))},h=y=>{j(C=>({...C,permissions:C.permissions.filter((L,q)=>q!==y)}))},k=(y,C,L)=>{j(q=>({...q,permissions:q.permissions.map((X,m)=>m===y?{...X,[C]:L}:X)}))},B=y=>y.type==="custom"?H:y.level<=3?ie:y.level<=4?te:je,W=y=>y.type==="custom"?"text-purple-600 dark:text-purple-400":y.level<=2?"text-blue-600 dark:text-blue-400":y.level<=4?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return!n||n.privilege_level<5?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{size:64,className:"mx-auto text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You need System Administrator privileges (Level 5+) to access this page."}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:["Current level: ",(n==null?void 0:n.privilege_level)||"Not logged in"]})]})}):t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Privilege Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage privilege levels, custom permissions, and user access rights"})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"levels",name:"All Levels",icon:H},{id:"custom",name:"Custom Levels",icon:te},{id:"templates",name:"Permission Templates",icon:je}].map(y=>{const C=y.icon;return e.jsxs("button",{onClick:()=>v(y.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${g===y.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(C,{size:16,className:"mr-2"}),y.name]},y.id)})})}),g==="levels"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"All Privilege Levels"}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[e.jsx(re,{size:16,className:"mr-2"}),"Create Custom Level"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(y=>{const C=B(y);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{size:24,className:`mr-3 ${W(y)}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Level ",y.level]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.type==="custom"?"Custom":"Standard"})]})]}),y.type==="custom"&&e.jsx("button",{onClick:()=>T(y.level),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(ee,{size:16})})]}),e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:y.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:y.description}),y.permissions&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:["Permissions (",y.permissions.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[y.permissions.slice(0,3).map((L,q)=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[L.resource_type," ‚Ä¢ ",L.action," ‚Ä¢ ",L.scope]},q)),y.permissions.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",y.permissions.length-3," more..."]})]})]})]},y.level)})})]}),g==="custom"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Custom Privilege Levels"}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[e.jsx(re,{size:16,className:"mr-2"}),"Create New Level"]})]}),d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Custom Levels"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first custom privilege level to get started."}),e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[e.jsx(re,{size:16,className:"mr-2"}),"Create Custom Level"]})]}):e.jsx("div",{className:"space-y-6",children:d.map(y=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:24,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Level ",y.level,": ",y.name]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Custom Privilege Level"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{P(y),E(!0)},className:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:()=>T(y.level),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(ee,{size:16})})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Permissions (",y.permissions.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:y.permissions.map((C,L)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.resource_type}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[C.action," ‚Ä¢ ",C.scope]})]}),e.jsxs("div",{className:"ml-2",children:[C.scope==="all"&&e.jsx(ne,{size:12,className:"text-green-500"}),C.scope==="department"&&e.jsx(ze,{size:12,className:"text-yellow-500"}),C.scope==="own"&&e.jsx(de,{size:12,className:"text-blue-500"})]})]},L))})]})]},y.level))})]}),g==="templates"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Permission Templates"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(y=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(je,{size:24,className:"text-blue-600 dark:text-blue-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Permission Template"})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:["Permissions (",y.permissions.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[y.permissions.slice(0,3).map((C,L)=>e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[C.resource_type," ‚Ä¢ ",C.action," ‚Ä¢ ",C.scope]},L)),y.permissions.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",y.permissions.length-3," more..."]})]})]}),e.jsx("button",{className:"mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm",children:"Apply Template"})]},y.id))})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create Custom Privilege Level"})}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Level Number"}),e.jsx("input",{type:"number",min:"6",value:c.level_number,onChange:y=>j(C=>({...C,level_number:parseInt(y.target.value)})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:y=>j(C=>({...C,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:y=>j(C=>({...C,description:y.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Permissions"}),e.jsxs("button",{type:"button",onClick:A,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:[e.jsx(re,{size:14,className:"mr-1"}),"Add Permission"]})]}),e.jsx("div",{className:"space-y-3",children:c.permissions.map((y,C)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[e.jsxs("select",{value:y.resource_type,onChange:L=>k(C,"resource_type",L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-600 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Resource"}),M.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsxs("select",{value:y.action,onChange:L=>k(C,"action",L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-600 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Action"}),z.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsxs("select",{value:y.scope,onChange:L=>k(C,"scope",L.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-600 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Scope"}),R.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsx("button",{type:"button",onClick:()=>h(C),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(ee,{size:16})})]},C))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Create Level"})]})]})]})})]})};class Yt{constructor(){this.connectionMethods=[{name:"primary",url:"http://localhost:5000",priority:1},{name:"fallback1",url:void 0,priority:2},{name:"fallback2",url:void 0,priority:3}].filter(t=>t.url),this.currentMethod=this.connectionMethods[0],this.offlineData=new Map,this.pendingSync=[],this.isOnline=navigator.onLine,this.setupEventListeners(),this.initializeServiceWorker()}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingData(),this.notifyStatusChange("online")}),window.addEventListener("offline",()=>{this.isOnline=!1,this.notifyStatusChange("offline")}),"connection"in navigator&&navigator.connection.addEventListener("change",()=>{this.handleConnectionChange()})}async initializeServiceWorker(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t),navigator.serviceWorker.addEventListener("message",s=>{this.handleServiceWorkerMessage(s.data)})}catch(t){console.warn("Service Worker registration failed:",t)}}async makeRequest(t,s={}){const r={id:this.generateRequestId(),endpoint:t,options:s,timestamp:Date.now(),retries:0};if(!this.isOnline)return this.queueOfflineRequest(r),this.createOfflineResponse(r);for(const d of this.connectionMethods)try{const x=await this.tryConnection(d,t,s);if(x)return this.currentMethod=d,x}catch(x){console.warn(`Connection method ${d.name} failed:`,x);continue}return this.queueOfflineRequest(r),this.createOfflineResponse(r)}async tryConnection(t,s,a){const r=`${t.url}${s}`,d=this.getTimeoutForMethod(t),x=new AbortController,w=setTimeout(()=>x.abort(),d);try{const p=await fetch(r,{...a,signal:x.signal,headers:{"Content-Type":"application/json","X-Connection-Method":t.name,"X-Request-ID":this.generateRequestId(),...a.headers}});if(clearTimeout(w),p.ok)return p;if(p.status>=500)throw new Error(`Server error: ${p.status}`);return p}catch(p){throw clearTimeout(w),p}}getTimeoutForMethod(t){switch(t.priority){case 1:return 1e4;case 2:return 5e3;case 3:return 3e3;default:return 5e3}}queueOfflineRequest(t){this.pendingSync.push(t),this.saveToLocalStorage("pendingSync",this.pendingSync),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"QUEUE_REQUEST",request:t})}createOfflineResponse(t){return{ok:!1,status:503,statusText:"Service Unavailable - Offline",json:async()=>({error:"Offline mode",message:"Request queued for sync when connection is restored",requestId:t.id,timestamp:t.timestamp}),offline:!0,requestId:t.id}}async syncPendingData(){if(this.pendingSync.length===0)return;console.log(`Syncing ${this.pendingSync.length} pending requests...`);const t=[],s=[];for(const a of this.pendingSync)try{const r=await this.makeRequest(a.endpoint,a.options);r.ok&&!r.offline?t.push(a.id):s.push(a)}catch{s.push(a)}this.pendingSync=this.pendingSync.filter(a=>!t.includes(a.id)),this.saveToLocalStorage("pendingSync",this.pendingSync),this.notifySyncComplete(t.length,s.length)}storeOfflineData(t,s){this.offlineData.set(t,{data:s,timestamp:Date.now(),version:this.getDataVersion(t)}),this.saveToLocalStorage("offlineData",Object.fromEntries(this.offlineData))}getOfflineData(t){const s=this.offlineData.get(t);return s&&this.isDataFresh(s.timestamp)?s.data:null}isDataFresh(t,s=24*60*60*1e3){return Date.now()-t<s}getDataVersion(t){return localStorage.getItem(`dataVersion_${t}`)||"1.0"}handleConnectionChange(){const t=navigator.connection;if(t){const s=this.assessConnectionQuality(t);this.notifyConnectionQuality(s)}}assessConnectionQuality(t){const{effectiveType:s,downlink:a,rtt:r}=t;return s==="4g"&&a>10&&r<50?"excellent":s==="4g"&&a>5&&r<100?"good":s==="3g"||a>1?"fair":"poor"}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}saveToLocalStorage(t,s){try{localStorage.setItem(t,JSON.stringify(s))}catch(a){console.warn("Failed to save to localStorage:",a)}}loadFromLocalStorage(t){try{const s=localStorage.getItem(t);return s?JSON.parse(s):null}catch(s){return console.warn("Failed to load from localStorage:",s),null}}notifyStatusChange(t){window.dispatchEvent(new CustomEvent("networkStatusChange",{detail:{status:t,timestamp:Date.now()}}))}notifyConnectionQuality(t){window.dispatchEvent(new CustomEvent("connectionQualityChange",{detail:{quality:t,timestamp:Date.now()}}))}notifySyncComplete(t,s){window.dispatchEvent(new CustomEvent("syncComplete",{detail:{successful:t,failed:s,timestamp:Date.now()}}))}handleServiceWorkerMessage(t){switch(t.type){case"SYNC_REQUEST":this.syncPendingData();break;case"CACHE_UPDATED":console.log("Cache updated:",t.cache);break;default:console.log("Unknown service worker message:",t)}}getConnectionStatus(){return{isOnline:this.isOnline,currentMethod:this.currentMethod,pendingSync:this.pendingSync.length,connectionMethods:this.connectionMethods}}async forceSync(){await this.syncPendingData()}clearOfflineData(){this.offlineData.clear(),this.pendingSync=[],localStorage.removeItem("offlineData"),localStorage.removeItem("pendingSync")}}const oe=new Yt,Zt=()=>{const{user:n}=J(),[t,s]=l.useState({isOnline:navigator.onLine,quality:"unknown",pendingSync:0,currentMethod:null}),[a,r]=l.useState({cachedItems:0,storageUsed:"0 MB",lastSync:null}),[d,x]=l.useState(!1);l.useEffect(()=>{w();const N=setInterval(w,5e3);return()=>clearInterval(N)},[]);const w=()=>{const N=oe.getConnectionStatus();s(N);const b=oe.loadFromLocalStorage("offlineData");r({cachedItems:Object.keys(b||{}).length,storageUsed:`${Math.round(JSON.stringify(b||{}).length/1024)} KB`,lastSync:localStorage.getItem("lastSync")||"Never"})},p=async()=>{try{await oe.forceSync(),w()}catch(N){console.error("Manual sync failed:",N)}},g=()=>{oe.clearOfflineData(),w()},v=()=>{if(!t.isOnline)return e.jsx(Ce,{className:"w-6 h-6 text-red-500"});switch(t.quality){case"excellent":return e.jsx(U,{className:"w-6 h-6 text-green-500"});case"good":return e.jsx(Y,{className:"w-6 h-6 text-green-400"});case"fair":return e.jsx(le,{className:"w-6 h-6 text-yellow-500"});case"poor":return e.jsx(le,{className:"w-6 h-6 text-orange-500"});default:return e.jsx(Y,{className:"w-6 h-6 text-gray-400"})}},u=()=>{if(!t.isOnline)return"text-red-600 bg-red-50 border-red-200";switch(t.quality){case"excellent":return"text-green-600 bg-green-50 border-green-200";case"good":return"text-green-600 bg-green-50 border-green-200";case"fair":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"poor":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return!n||n.privilege_level<4?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{size:64,className:"mx-auto text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You need HR Manager privileges (Level 4+) to access Myanmar Security settings."})]})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"üá≤üá≤ Myanmar Security"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor system status and manage security for Myanmar deployment"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Network Status"}),v()]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${t.isOnline?"text-green-600":"text-red-600"}`,children:t.isOnline?"Online":"Offline"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quality:"}),e.jsx("span",{className:"font-medium capitalize",children:t.quality})]}),t.pendingSync>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Sync:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[t.pendingSync," items"]})]})]}),e.jsxs("button",{onClick:p,disabled:!t.isOnline,className:"w-full flex items-center justify-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Sync Now"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Offline Data"}),e.jsx(Me,{className:"w-6 h-6 text-blue-500"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Cached Items:"}),e.jsx("span",{className:"font-medium",children:a.cachedItems})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Storage Used:"}),e.jsx("span",{className:"font-medium",children:a.storageUsed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Sync:"}),e.jsx("span",{className:"font-medium",children:a.lastSync})]})]}),e.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center space-x-2 bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear Cache"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Security Status"}),e.jsx(ne,{className:"w-6 h-6 text-green-500"})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"E2EE:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Encryption:"}),e.jsx("span",{className:"font-medium",children:"AES-256-GCM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Key Rotation:"}),e.jsx("span",{className:"font-medium",children:"Automatic"})]})]}),e.jsx("div",{className:`p-3 rounded-lg border ${u()}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"All security features active"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"w-5 h-5 mr-2 text-purple-500"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:p,disabled:!t.isOnline,className:"flex items-center justify-center space-x-2 p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(be,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Sync Data"})]}),e.jsxs("button",{onClick:g,className:"flex items-center justify-center space-x-2 p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Clear Cache"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center space-x-2 p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(te,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Settings"})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(Xe,{className:"w-6 h-6 mr-2 text-blue-500"}),"Myanmar Security Settings"]}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"√ó"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Auto Sync"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically sync data when online"})]}),e.jsx("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-blue-500",children:e.jsx("span",{className:"inline-block h-4 w-4 transform translate-x-6 rounded-full bg-white"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Offline Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable offline functionality"})]}),e.jsx("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-green-500",children:e.jsx("span",{className:"inline-block h-4 w-4 transform translate-x-6 rounded-full bg-white"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"E2EE Encryption"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"End-to-end encryption for all data"})]}),e.jsx("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-green-500",children:e.jsx("span",{className:"inline-block h-4 w-4 transform translate-x-6 rounded-full bg-white"})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2"}),"Myanmar Deployment Features"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Censorship resistance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Offline functionality"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"E2EE protection"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Mobile optimized"})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Close"})})]})})]})},Xt=()=>{var p;const{user:n,updateProfile:t}=J(),[s,a]=l.useState(!1),[r,d]=l.useState({name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",address:(n==null?void 0:n.address)||"",bio:(n==null?void 0:n.bio)||""}),x=g=>{d({...r,[g.target.name]:g.target.value})},w=async g=>{g.preventDefault(),(await t(r)).success&&a(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),e.jsx("button",{onClick:()=>a(!s),className:"btn btn-primary btn-md mt-4 sm:mt-0",children:s?"Cancel":"Edit Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-primary-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:((p=n==null?void 0:n.name)==null?void 0:p.charAt(0))||"U"})}),s&&e.jsx("button",{className:"absolute bottom-0 right-0 h-8 w-8 bg-primary-600 rounded-full flex items-center justify-center text-white hover:bg-primary-700",children:e.jsx(kt,{className:"h-4 w-4"})})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:(n==null?void 0:n.name)||"User Name"}),e.jsx("p",{className:"text-gray-600",children:(n==null?void 0:n.role)||"Employee"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Member since ",new Date().getFullYear()]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Be,{className:"h-4 w-4 mr-3 text-gray-400"}),(n==null?void 0:n.email)||"user@example.com"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ue,{className:"h-4 w-4 mr-3 text-gray-400"}),(n==null?void 0:n.phone)||"+1 (555) 123-4567"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx($e,{className:"h-4 w-4 mr-3 text-gray-400"}),(n==null?void 0:n.address)||"Address not set"]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Personal Information"})}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"label",children:"Full Name"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:x,disabled:!s,className:"input pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email Address"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:x,disabled:!s,className:"input pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"label",children:"Phone Number"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:x,disabled:!s,className:"input pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"label",children:"Address"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:x,disabled:!s,className:"input pl-10"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"label",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",rows:4,value:r.bio,onChange:x,disabled:!s,className:"input mt-1 resize-none",placeholder:"Tell us about yourself..."})]}),s&&e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"btn btn-outline btn-md",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary btn-md",children:[e.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Settings"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update your password regularly"})]}),e.jsx("button",{className:"btn btn-outline btn-sm",children:"Change"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security"})]}),e.jsx("button",{className:"btn btn-outline btn-sm",children:"Enable"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your notification preferences"})]}),e.jsx("button",{className:"btn btn-outline btn-sm",children:"Configure"})]})]})]})]})]})]})};class Ke{constructor(){this.isInitialized=!1,this.keys=null}async initialize(t,s){try{if(!window.crypto||!window.crypto.subtle)throw new Error("Web Crypto API not supported");const r=new TextEncoder().encode(t+s),d=await window.crypto.subtle.importKey("raw",r,{name:"AES-GCM"},!1,["encrypt","decrypt"]);this.keys={encryptionKey:d,signingKey:d},this.isInitialized=!0,console.log("üîí Simple E2EE Service initialized")}catch(a){throw console.error("‚ùå E2EE initialization failed:",a),a}}async encryptField(t){if(!this.isInitialized)throw new Error("Service not initialized");try{const a=new TextEncoder().encode(JSON.stringify({value:t,timestamp:Date.now()})),r=window.crypto.getRandomValues(new Uint8Array(12)),d=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},this.keys.encryptionKey,a),x=new Uint8Array(r.length+d.byteLength);return x.set(r,0),x.set(new Uint8Array(d),r.length),btoa(String.fromCharCode(...x))}catch(s){throw console.error("Encryption failed:",s),s}}async decryptField(t){if(!this.isInitialized)throw new Error("Service not initialized");try{const s=new Uint8Array(atob(t).split("").map(p=>p.charCodeAt(0))),a=s.slice(0,12),r=s.slice(12),d=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:a},this.keys.encryptionKey,r),x=new TextDecoder;return JSON.parse(x.decode(d)).value}catch(s){throw console.error("Decryption failed:",s),s}}generateSalt(){const t=window.crypto.getRandomValues(new Uint8Array(16));return btoa(String.fromCharCode(...t))}static isSupported(){return typeof window<"u"&&window.crypto&&window.crypto.subtle&&window.crypto.getRandomValues}}const es=()=>{const[n,t]=l.useState("admin123"),[s,a]=l.useState(""),[r,d]=l.useState(!1),[x,w]=l.useState({firstName:"John",lastName:"Doe",email:"john.doe@company.com",salary:75e3,ssn:"123-45-6789",address:"123 Main St, Anytown, USA",phone:"+1 (555) 123-4567"}),[p,g]=l.useState({}),[v,u]=l.useState({}),[N,b]=l.useState(!1),[E,f]=l.useState(!1),[P,c]=l.useState(""),[j,M]=l.useState(""),[z]=l.useState(()=>new Ke);l.useEffect(()=>{if(!Ke.isSupported()){M("Web Crypto API is not supported in this browser. Please use a modern browser.");return}try{const k=z.generateSalt();a(k),c("Ready to initialize E2EE service")}catch(k){M("Failed to generate salt: "+k.message)}},[z]);const R=async()=>{f(!0),M(""),c("Initializing E2EE service...");try{await z.initialize(n,s),d(!0),c("‚úÖ E2EE service initialized successfully")}catch(k){M("Failed to initialize E2EE service: "+k.message),c("‚ùå E2EE initialization failed")}finally{f(!1)}},F=async()=>{if(!r){M("Please initialize E2EE service first");return}f(!0),M(""),c("Encrypting sensitive data...");try{const k={};for(const[B,W]of Object.entries(x))k[`${B}_encrypted`]=await z.encryptField(W);g(k),c("‚úÖ Data encrypted successfully")}catch(k){M("Encryption failed: "+k.message),c("‚ùå Encryption failed")}finally{f(!1)}},o=async()=>{if(!r||Object.keys(p).length===0){M("Please encrypt data first");return}f(!0),M(""),c("Decrypting data...");try{const k={};for(const[B,W]of Object.entries(p)){const y=B.replace("_encrypted","");k[y]=await z.decryptField(W)}u(k),c("‚úÖ Data decrypted successfully")}catch(k){M("Decryption failed: "+k.message),c("‚ùå Decryption failed")}finally{f(!1)}},T=()=>{const k=JSON.stringify(x)===JSON.stringify(v);c(k?"‚úÖ Data integrity verified - no tampering detected":"‚ùå Data integrity check failed - possible tampering")},A=({label:k,value:B,isEncrypted:W=!1,isPublic:y=!1})=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:k}),e.jsxs("div",{className:"flex items-center space-x-2",children:[W&&e.jsx(ne,{className:"w-4 h-4 text-red-500"}),y&&e.jsx(de,{className:"w-4 h-4 text-green-500"})]})]}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:typeof B=="string"&&B.length>50?`${B.substring(0,50)}...`:B})]}),h=({step:k,title:B,description:W,children:y,isActive:C,isCompleted:L})=>e.jsxs("div",{className:`p-6 rounded-lg border-2 ${C?"border-blue-500 bg-blue-50":L?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${L?"bg-green-500":C?"bg-blue-500":"bg-gray-400"}`,children:L?e.jsx(U,{className:"w-5 h-5"}):k}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:B}),e.jsx("p",{className:"text-sm text-gray-600",children:W})]})]}),y]});return j&&j.includes("not supported")?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"E2EE Not Supported"}),e.jsx("p",{className:"text-red-700",children:j}),e.jsx("p",{className:"text-sm text-red-600 mt-4",children:"Please use a modern browser like Chrome, Firefox, Safari, or Edge."})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[e.jsx(H,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"E2EE Visual Demonstration"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"See how your sensitive HR data is protected with End-to-End Encryption"})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700",children:j})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r?e.jsx(U,{className:"w-5 h-5 text-green-500"}):e.jsx(Z,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("span",{className:"font-medium",children:["E2EE Status: ",r?"Initialized":"Not Initialized"]})]}),e.jsx("div",{className:"text-sm text-gray-600",children:P})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{step:"1",title:"Initialize E2EE Service",description:"Set up encryption keys using your password and salt",isActive:!r,isCompleted:r,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:n,onChange:k=>t(k.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salt (Auto-generated)"}),e.jsx("input",{type:"text",value:s,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),e.jsx("button",{onClick:R,disabled:E||r,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:E?"Initializing...":"Initialize E2EE"})]})}),e.jsx(h,{step:"2",title:"Encrypt Sensitive Data",description:"Transform sensitive information into encrypted format",isActive:r&&Object.keys(p).length===0,isCompleted:Object.keys(p).length>0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:F,disabled:E||!r,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:E?"Encrypting...":"Encrypt Data"}),Object.keys(p).length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:["‚úÖ ",Object.keys(p).length," fields encrypted"]})]})}),e.jsx(h,{step:"3",title:"Decrypt Data",description:"Retrieve original data using your encryption keys",isActive:Object.keys(p).length>0&&Object.keys(v).length===0,isCompleted:Object.keys(v).length>0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:o,disabled:E||Object.keys(p).length===0,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:E?"Decrypting...":"Decrypt Data"}),Object.keys(v).length>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:["‚úÖ ",Object.keys(v).length," fields decrypted"]})]})}),e.jsx(h,{step:"4",title:"Verify Integrity",description:"Ensure data hasn't been tampered with",isActive:Object.keys(v).length>0,isCompleted:!1,children:e.jsx("div",{className:"space-y-4",children:e.jsx("button",{onClick:T,disabled:Object.keys(v).length===0,className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Verify Data Integrity"})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2 text-green-500"}),"Original Data (Before Encryption)"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(A,{label:"First Name",value:x.firstName,isEncrypted:!0}),e.jsx(A,{label:"Last Name",value:x.lastName,isEncrypted:!0}),e.jsx(A,{label:"Email",value:x.email,isEncrypted:!0}),e.jsx(A,{label:"Salary",value:`$${x.salary.toLocaleString()}`,isEncrypted:!0}),e.jsx(A,{label:"SSN",value:x.ssn,isEncrypted:!0}),e.jsx(A,{label:"Address",value:x.address,isEncrypted:!0}),e.jsx(A,{label:"Phone",value:x.phone,isEncrypted:!0})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2 text-red-500"}),"Encrypted Data (In Database)"]}),e.jsxs("button",{onClick:()=>b(!N),className:"text-sm text-blue-600 hover:text-blue-800",children:[N?e.jsx(Ze,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"}),N?"Hide":"Show"," Encrypted"]})]}),Object.keys(p).length>0?e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(p).map(([k,B])=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:k}),e.jsx("div",{className:"text-xs text-gray-600 break-all",children:N?B:e.jsx("span",{className:"text-red-500",children:"üîí Encrypted Data"})})]},k))}):e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No encrypted data yet. Run the encryption step first."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ze,{className:"w-5 h-5 mr-2 text-green-500"}),"Decrypted Data (After Decryption)"]}),Object.keys(v).length>0?e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(A,{label:"First Name",value:v.firstName}),e.jsx(A,{label:"Last Name",value:v.lastName}),e.jsx(A,{label:"Email",value:v.email}),e.jsx(A,{label:"Salary",value:v.salary?`$${v.salary.toLocaleString()}`:""}),e.jsx(A,{label:"SSN",value:v.ssn}),e.jsx(A,{label:"Address",value:v.address}),e.jsx(A,{label:"Phone",value:v.phone})]}):e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No decrypted data yet. Run the decryption step first."})]})]})]}),e.jsxs("div",{className:"mt-12 bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"üîí Security Features Demonstrated"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"AES-GCM Encryption"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Authenticated encryption with integrity protection"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ne,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Zero-Knowledge Architecture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Server cannot decrypt your data - only you have the keys"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(U,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Tamper Detection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Any modification to encrypted data is detected"})]})]})]})]})})},ts=()=>{const{e2eeStatus:n}=J(),[t,s]=l.useState({autoMode:!0,performanceThreshold:1e3,pfsEnabled:!0,deniableEncryption:!1}),[a,r]=l.useState({mode:"unknown",networkSpeed:"unknown",initialized:!1,performanceHistory:[]}),[d,x]=l.useState(!1),[w,p]=l.useState(!1),[g,v]=l.useState(null);l.useEffect(()=>{u();const o=()=>{u()};$.onStatusChange(o),N()},[]);const u=()=>{const o=$.getStatus();r({mode:o.encryptionMode||"unknown",networkSpeed:o.networkSpeed||"unknown",initialized:o.initialized||!1,performanceHistory:o.performanceHistory||[]})},N=()=>{try{const o=localStorage.getItem("securitySettings");if(o){const T=JSON.parse(o);s(T),$.autoMode=T.autoMode,$.performanceThreshold=T.performanceThreshold,$.pfsEnabled=T.pfsEnabled}}catch(o){console.warn("Failed to load security settings:",o)}},b=o=>{try{localStorage.setItem("securitySettings",JSON.stringify(o)),s(o),$.autoMode=o.autoMode,$.performanceThreshold=o.performanceThreshold,$.pfsEnabled=o.pfsEnabled}catch(T){console.error("Failed to save security settings:",T)}},E=()=>{const o={...t,autoMode:!t.autoMode};b(o)},f=o=>{const T={...t,performanceThreshold:parseInt(o)};b(T)},P=()=>{const o={...t,pfsEnabled:!t.pfsEnabled};b(o)},c=async()=>{try{const o={...t,autoMode:!1};b(o),$.encryptionMode="e2ee",$.autoMode=!1,u(),v({type:"success",title:"E2EE Forced",message:"End-to-end encryption has been manually enabled"}),p(!0),setTimeout(()=>p(!1),3e3)}catch(o){console.error("Failed to force E2EE:",o),v({type:"error",title:"Error",message:"Failed to enable E2EE mode"}),p(!0),setTimeout(()=>p(!1),3e3)}},j=()=>{try{const o={...t,autoMode:!0};b(o),$.autoMode=!0,u(),v({type:"success",title:"Auto Mode Restored",message:"Automatic encryption switching has been re-enabled"}),p(!0),setTimeout(()=>p(!1),3e3)}catch(o){console.error("Failed to reset to auto mode:",o)}},M=()=>{if(!a.initialized)return e.jsx(Ne,{className:"w-8 h-8 text-gray-400"});switch(a.mode){case"e2ee":return e.jsx(et,{className:"w-8 h-8 text-green-500"});case"tls":return e.jsx(H,{className:"w-8 h-8 text-blue-500"});default:return e.jsx(Ne,{className:"w-8 h-8 text-gray-400"})}},z=()=>{if(!a.initialized)return"text-gray-500 bg-gray-100 border-gray-200";switch(a.mode){case"e2ee":return"text-green-600 bg-green-50 border-green-200";case"tls":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-500 bg-gray-100 border-gray-200"}},R=()=>{switch(a.networkSpeed){case"excellent":return e.jsx(Y,{className:"w-5 h-5 text-green-500"});case"good":return e.jsx(Y,{className:"w-5 h-5 text-blue-500"});case"fair":return e.jsx(Y,{className:"w-5 h-5 text-yellow-500"});case"poor":return e.jsx(Ce,{className:"w-5 h-5 text-red-500"});default:return e.jsx(Y,{className:"w-5 h-5 text-gray-400"})}},F=()=>{if(a.performanceHistory.length===0)return 0;const o=a.performanceHistory.reduce((T,A)=>T+A,0);return Math.round(o/a.performanceHistory.length)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:[w&&g&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in slide-in-from-right duration-300",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:g.type==="success"?e.jsx(U,{className:"w-5 h-5 text-green-500"}):g.type==="error"?e.jsx(le,{className:"w-5 h-5 text-red-500"}):e.jsx(pe,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:g.message})]}),e.jsx("button",{onClick:()=>p(!1),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[e.jsx(H,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Advanced Security Settings"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Configure encryption and security preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Current Encryption Status"]}),e.jsx("div",{className:`p-4 rounded-lg border ${z()} mb-4`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[M(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.initialized?a.mode==="e2ee"?"End-to-End Encryption":"Transport Layer Security":"Not Initialized"}),e.jsx("p",{className:"text-sm opacity-75",children:a.initialized?a.mode==="e2ee"?"Maximum security - data encrypted in browser":"Standard security - data encrypted in transit":"Encryption service not available"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[R(),e.jsx("span",{className:"text-sm font-medium",children:"Network"})]}),e.jsx("p",{className:"text-lg font-semibold capitalize",children:a.networkSpeed})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Latency"}),e.jsxs("p",{className:"text-lg font-semibold",children:[F(),"ms"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Network Performance"}),e.jsx("div",{className:"h-32 flex items-end space-x-1",children:a.performanceHistory.slice(-10).map((o,T)=>e.jsx("div",{className:"flex-1 bg-blue-500 rounded-t",style:{height:`${Math.min(o/1e3*100,100)}%`,backgroundColor:o>t.performanceThreshold?"#ef4444":"#3b82f6"},title:`${Math.round(o)}ms`},T))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsx("span",{children:"0ms"}),e.jsxs("span",{children:[t.performanceThreshold,"ms threshold"]}),e.jsx("span",{children:"1000ms"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"Security Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Automatic Mode"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Automatically switch between E2EE and TLS based on network performance"})]}),e.jsx("button",{onClick:E,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t.autoMode?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.autoMode?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Performance Threshold"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.performanceThreshold,"ms"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Switch to TLS when network latency exceeds this threshold"}),e.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:t.performanceThreshold,onChange:o=>f(o.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"500ms"}),e.jsx("span",{children:"2000ms"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Perfect Forward Secrecy"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Rotate encryption keys every 30 minutes for enhanced security"})]}),e.jsx("button",{onClick:P,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t.pfsEnabled?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t.pfsEnabled?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:!a.initialized,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Force E2EE"}),e.jsx("button",{onClick:j,disabled:!a.initialized||t.autoMode,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Reset to Auto"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Force E2EE: Manually enable maximum security. Reset to Auto: Restore automatic switching."})]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(pe,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100",children:"How It Works"}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ E2EE encrypts data in your browser before sending to server"}),e.jsx("li",{children:"‚Ä¢ TLS provides standard encryption when network is slow"}),e.jsx("li",{children:"‚Ä¢ Automatic switching ensures optimal performance and security"}),e.jsx("li",{children:"‚Ä¢ Perfect Forward Secrecy rotates keys regularly"})]})]})]})})]})]})]})]})},ss=()=>{const n=fe();l.useEffect(()=>{const s=setTimeout(()=>{n("/login")},1e4);return()=>clearTimeout(s)},[n]);const t=()=>{n("/login")};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"h-8 w-8 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Emergency Logout Complete"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hot Radish - Emergency Security Protocol"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Local Data Cleared"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"All cached data and encryption keys have been removed from your device."})]})]})}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Browser Cache Cleared"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Local storage, session storage, and IndexedDB have been purged."})]})]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Security Protocol Activated"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Your session has been securely terminated. No data remains on this device."})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"What happened?"}),e.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ All local data has been permanently deleted"}),e.jsx("li",{children:"‚Ä¢ Encryption keys have been cleared"}),e.jsx("li",{children:"‚Ä¢ Browser cache and storage have been purged"}),e.jsx("li",{children:"‚Ä¢ Your session has been terminated"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:t,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Return to Login"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"You will be automatically redirected in 10 seconds"})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"If you believe your security has been compromised, please contact your system administrator immediately."})})]})})},as=()=>{const{user:n}=J(),[t,s]=l.useState([]),[a,r]=l.useState([]),[d,x]=l.useState(!0),[w,p]=l.useState(!1),[g,v]=l.useState(""),[u,N]=l.useState(""),[b,E]=l.useState("grid"),[f,P]=l.useState("created_at"),[c,j]=l.useState("desc"),[M,z]=l.useState(!1),[R,F]=l.useState(null),[o,T]=l.useState({title:"",description:"",category_id:"",tags:[]});l.useEffect(()=>{A(),h()},[]);const A=async()=>{var i;try{x(!0);const I=await D.get("/api/documents");s(I.data.documents||[])}catch(I){console.error("Error fetching documents:",I),((i=I.response)==null?void 0:i.status)===403&&console.log("Access denied - user may not have sufficient privileges for documents")}finally{x(!1)}},h=async()=>{try{const i=await D.get("/api/documents/categories");r(i.data.categories||[])}catch(i){console.error("Error fetching categories:",i)}},k=i=>{const I=i.target.files[0];I&&(F(I),o.title||T(V=>({...V,title:I.name.replace(/\.[^/.]+$/,"")})))},B=async()=>{if(!R){alert("Please select a file");return}if(!o.title.trim()){alert("Please enter a title");return}try{p(!0);const i=new FormData;i.append("file",R),i.append("title",o.title),i.append("description",o.description),i.append("category_id",o.category_id),i.append("tags",JSON.stringify(o.tags)),await D.post("/api/documents",i,{headers:{"Content-Type":"multipart/form-data"}}),T({title:"",description:"",category_id:"",tags:[]}),F(null),z(!1),A()}catch(i){console.error("Error uploading document:",i),alert("Failed to upload document")}finally{p(!1)}},W=async i=>{try{const I=await D.get(`/api/documents/${i.id}/download`);alert(`Download ready for: ${I.data.original_filename}`)}catch(I){console.error("Error downloading document:",I),alert("Failed to download document")}},y=async i=>{if(confirm("Are you sure you want to delete this document?"))try{await D.delete(`/api/documents/${i}`),A()}catch(I){console.error("Error deleting document:",I),alert("Failed to delete document")}},L=[...t.filter(i=>{var G;const I=i.title.toLowerCase().includes(g.toLowerCase())||((G=i.description)==null?void 0:G.toLowerCase().includes(g.toLowerCase())),V=!u||i.category_id==u;return I&&V})].sort((i,I)=>{let V=i[f],G=I[f];return(f==="created_at"||f==="updated_at")&&(V=new Date(V),G=new Date(G)),c==="asc"?V>G?1:-1:V<G?1:-1}),q=i=>{if(i===0)return"0 Bytes";const I=1024,V=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(i)/Math.log(I));return parseFloat((i/Math.pow(I,G)).toFixed(2))+" "+V[G]},X=i=>new Date(i).toLocaleDateString(),m=i=>i!=null&&i.includes("pdf")?"üìÑ":i!=null&&i.includes("word")?"üìù":i!=null&&i.includes("excel")||i!=null&&i.includes("spreadsheet")?"üìä":i!=null&&i.includes("image")?"üñºÔ∏è":"üìÑ";return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading documents..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Document Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and organize your documents securely"})]}),e.jsxs("button",{onClick:()=>z(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Document"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:g,onChange:i=>v(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:u,onChange:i=>N(i.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),a.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),e.jsxs("select",{value:`${f}-${c}`,onChange:i=>{const[I,V]=i.target.value.split("-");P(I),j(V)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"created_at-desc",children:"Newest First"}),e.jsx("option",{value:"created_at-asc",children:"Oldest First"}),e.jsx("option",{value:"title-asc",children:"Name A-Z"}),e.jsx("option",{value:"title-desc",children:"Name Z-A"}),e.jsx("option",{value:"file_size-desc",children:"Largest First"}),e.jsx("option",{value:"file_size-asc",children:"Smallest First"})]}),e.jsxs("div",{className:"flex border border-gray-300 dark:border-gray-600 rounded-md",children:[e.jsx("button",{onClick:()=>E("grid"),className:`px-3 py-2 ${b==="grid"?"bg-primary-600 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:e.jsx(Ct,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E("list"),className:`px-3 py-2 ${b==="list"?"bg-primary-600 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:e.jsx(Lt,{className:"w-4 h-4"})})]})]})]})}),L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ye,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:g||u?"Try adjusting your search or filters.":"Get started by uploading your first document."}),!g&&!u&&e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors mx-auto",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Document"})]})]}):e.jsx("div",{className:b==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:L.map(i=>e.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow ${b==="list"?"flex items-center p-4":"p-4"}`,children:b==="grid"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:m(i.mime_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:q(i.file_size)})]})]}),e.jsx("div",{className:"relative",children:e.jsx("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(Dt,{className:"w-4 h-4 text-gray-400"})})})]}),i.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"w-3 h-3"}),e.jsx("span",{children:X(i.created_at)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{children:i.uploaded_by_name})]})]}),i.category_name&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.category_color}}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:i.category_name})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>W(i),className:"flex items-center space-x-1 text-xs text-primary-600 hover:text-primary-700",children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:()=>y(i.id),className:"flex items-center space-x-1 text-xs text-red-600 hover:text-red-700",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{children:"Delete"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl",children:m(i.mime_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:i.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i.description&&`${i.description} ‚Ä¢ `,q(i.file_size)," ‚Ä¢ ",X(i.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i.category_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:i.category_color}}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:i.category_name})]}),e.jsx("button",{onClick:()=>W(i),className:"p-1 text-gray-400 hover:text-primary-600",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(i.id),className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(ee,{className:"w-4 h-4"})})]})]})},i.id))}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upload Document"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File"}),e.jsx("input",{type:"file",onChange:k,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.jpg,.jpeg,.png,.gif"}),R&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Selected: ",R.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:o.title,onChange:i=>T(I=>({...I,title:i.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Document title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:i=>T(I=>({...I,description:i.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"3",placeholder:"Document description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:o.category_id,onChange:i=>T(I=>({...I,category_id:i.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Category"}),a.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:w||!R||!o.title.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Uploading...":"Upload"})]})]})})]})},rs=()=>{var L,q,X;const{user:n}=J(),[t,s]=l.useState([]),[a,r]=l.useState([]),[d,x]=l.useState([]),[w,p]=l.useState(!0),[g,v]=l.useState(""),[u,N]=l.useState(""),[b,E]=l.useState(!1),[f,P]=l.useState(null),[c,j]=l.useState({first_name:"",last_name:"",email:"",position:"",department:"",start_date:"",template_id:"",assigned_manager_id:"",notes:"",date_of_birth:"",gender:"",nationality:"",job_description:"",employment_type:"Full-time",education_qualifications:"",relevant_experience:""});l.useEffect(()=>{M(),z(),R()},[]);const M=async()=>{var m;try{p(!0);const i=await D.get("/api/onboarding/processes");s(i.data.processes||[])}catch(i){console.error("Error fetching onboarding processes:",i),((m=i.response)==null?void 0:m.status)===403&&console.log("Access denied - user may not have sufficient privileges")}finally{p(!1)}},z=async()=>{try{const m=await D.get("/api/onboarding/templates");r(m.data.templates||[])}catch(m){console.error("Error fetching templates:",m)}},R=async()=>{try{const m=await D.get("/api/onboarding/checklist");x(m.data.checklist||[])}catch(m){console.error("Error fetching checklist:",m)}},F=async()=>{if(!c.first_name||!c.last_name||!c.email){alert("Please fill in all required fields");return}try{const m=await D.post("/api/onboarding/start",{employee_data:{first_name:c.first_name,last_name:c.last_name,email:c.email,position:c.position,department:c.department,date_of_birth:c.date_of_birth||null,gender:c.gender,nationality:c.nationality,job_description:c.job_description,employment_type:c.employment_type,education_qualifications:c.education_qualifications,relevant_experience:c.relevant_experience},template_id:c.template_id||null,assigned_manager_id:c.assigned_manager_id||null,start_date:c.start_date,notes:c.notes});j({first_name:"",last_name:"",email:"",position:"",department:"",start_date:"",template_id:"",assigned_manager_id:"",notes:"",date_of_birth:"",gender:"",nationality:"",job_description:"",employment_type:"Full-time",education_qualifications:"",relevant_experience:""}),E(!1),M()}catch(m){console.error("Error starting onboarding:",m),alert("Failed to start onboarding process")}},o=async m=>{try{const i=await D.get(`/api/onboarding/processes/${m}`);P(i.data.process)}catch(i){console.error("Error fetching process details:",i)}},T=async(m,i,I)=>{try{await D.put(`/api/onboarding/tasks/${m}`,{status:i,notes:I}),f&&o(f.id)}catch(V){console.error("Error updating task:",V),alert("Failed to update task")}},A=async m=>{if(confirm("Are you sure you want to complete this onboarding process?"))try{await D.post(`/api/onboarding/processes/${m}/complete`),M(),P(null)}catch(i){console.error("Error completing process:",i),alert("Failed to complete onboarding process")}},h=t.filter(m=>{var V,G,xe,me;const i=((V=m.first_name)==null?void 0:V.toLowerCase().includes(g.toLowerCase()))||((G=m.last_name)==null?void 0:G.toLowerCase().includes(g.toLowerCase()))||((xe=m.email)==null?void 0:xe.toLowerCase().includes(g.toLowerCase()))||((me=m.position)==null?void 0:me.toLowerCase().includes(g.toLowerCase())),I=!u||m.status===u;return i&&I}),k=m=>{switch(m){case"in_progress":return"text-blue-600 bg-blue-100 dark:bg-blue-900 dark:text-blue-300";case"completed":return"text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-300";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-300";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"}},B=m=>{switch(m){case"in_progress":return e.jsx(se,{className:"w-4 h-4 flex-shrink-0"});case"completed":return e.jsx(U,{className:"w-4 h-4 flex-shrink-0"});case"cancelled":return e.jsx(Z,{className:"w-4 h-4 flex-shrink-0"});default:return e.jsx(se,{className:"w-4 h-4 flex-shrink-0"})}},W=m=>{switch(m){case"completed":return"text-green-600";case"in_progress":return"text-blue-600";case"overdue":return"text-red-600";default:return"text-gray-600 dark:text-gray-400"}},y=m=>{switch(m){case"completed":return e.jsx(U,{className:"w-4 h-4 flex-shrink-0"});case"in_progress":return e.jsx(zt,{className:"w-4 h-4 flex-shrink-0"});case"overdue":return e.jsx(Z,{className:"w-4 h-4 flex-shrink-0"});default:return e.jsx(Tt,{className:"w-4 h-4 flex-shrink-0"})}},C=m=>new Date(m).toLocaleDateString();return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading onboarding processes..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Employee Onboarding"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage employee onboarding processes and track progress"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"mt-4 sm:mt-0 flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:[e.jsx(we,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Start Onboarding"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex-shrink-0"}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:g,onChange:m=>v(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:u,onChange:m=>N(m.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Onboarding Processes (",h.length,")"]})}),e.jsx("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(we,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 flex-shrink-0"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No onboarding processes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started by creating a new onboarding process."}),e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center space-x-2 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors mx-auto",children:[e.jsx(we,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Start Onboarding"})]})]}):h.map(m=>e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(f==null?void 0:f.id)===m.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>o(m.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:[m.first_name," ",m.last_name]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k(m.status)} flex items-center space-x-1`,children:[B(m.status),e.jsx("span",{className:"hidden sm:inline",children:m.status==="in_progress"?"In Progress":m.status==="completed"?"Completed":m.status==="cancelled"?"Cancelled":"Pending"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:[m.position," ‚Ä¢ ",m.department]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Started: ",C(m.start_date)]})]},m.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Process Details"})}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Employee Information"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[f.first_name," ",f.last_name]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Position:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.position})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Department:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.department||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Age/Gender:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.age&&f.gender?`${f.age}/${f.gender}`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nationality:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.nationality||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Employment Type:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.employment_type||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Education:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f.education_qualifications||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Start Date:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C(f.start_date)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Onboarding Tasks"}),e.jsx("div",{className:"space-y-3",children:(L=f.tasks)==null?void 0:L.map(m=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("span",{className:W(m.status),children:y(m.status)}),e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:m.task_name})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[m.status!=="completed"&&e.jsx("button",{onClick:()=>T(m.id,"completed",m.notes),className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 transition-colors",children:"Complete"}),m.status==="pending"&&e.jsx("button",{onClick:()=>T(m.id,"in_progress",m.notes),className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition-colors",children:"Start"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:m.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-500",children:[e.jsxs("span",{children:["Due: ",C(m.due_date)]}),e.jsxs("span",{className:"truncate ml-2",children:["Assigned to: ",m.assigned_to_name]})]}),m.notes&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-xs text-gray-700 dark:text-gray-300",children:m.notes})]},m.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(q=f.tasks)==null?void 0:q.filter(m=>m.status==="completed").length," of ",(X=f.tasks)==null?void 0:X.length," tasks completed"]}),f.status==="in_progress"&&e.jsx("button",{onClick:()=>A(f.id),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"Complete Process"})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4 flex-shrink-0"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Select a Process"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose an onboarding process from the list to view details and manage tasks."})]})})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Start New Onboarding"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:c.first_name,onChange:m=>j(i=>({...i,first_name:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:c.last_name,onChange:m=>j(i=>({...i,last_name:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Last name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:c.email,onChange:m=>j(i=>({...i,email:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@company.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:c.date_of_birth,onChange:m=>j(i=>({...i,date_of_birth:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",max:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gender"}),e.jsxs("select",{value:c.gender,onChange:m=>j(i=>({...i,gender:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nationality"}),e.jsx("input",{type:"text",value:c.nationality,onChange:m=>j(i=>({...i,nationality:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Bamar, British, American"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Employment Type"}),e.jsxs("select",{value:c.employment_type,onChange:m=>j(i=>({...i,employment_type:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Full-time",children:"Full-time"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Temporary",children:"Temporary"}),e.jsx("option",{value:"Consultant",children:"Consultant"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Position"}),e.jsx("input",{type:"text",value:c.position,onChange:m=>j(i=>({...i,position:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Job title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Job Description"}),e.jsx("textarea",{value:c.job_description,onChange:m=>j(i=>({...i,job_description:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"2",placeholder:"Brief description of responsibilities..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Education Qualifications"}),e.jsx("input",{type:"text",value:c.education_qualifications,onChange:m=>j(i=>({...i,education_qualifications:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., BA (English), MA TESOL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Relevant Experience"}),e.jsx("textarea",{value:c.relevant_experience,onChange:m=>j(i=>({...i,relevant_experience:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"2",placeholder:"Previous work experience..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:c.start_date,onChange:m=>j(i=>({...i,start_date:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:m=>j(i=>({...i,notes:m.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"3",placeholder:"Additional notes..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:!c.first_name||!c.last_name||!c.email,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Start Onboarding"})]})]})})]})},ns=()=>{const{user:n}=J(),[t,s]=l.useState([]),[a,r]=l.useState([]),[d,x]=l.useState([]),[w,p]=l.useState({}),[g,v]=l.useState(!0),[u,N]=l.useState(null),[b,E]=l.useState(!1),[f,P]=l.useState(!1);l.useEffect(()=>{c()},[]);const c=async()=>{try{v(!0);const[o,T,A,h]=await Promise.all([D.get("/approvals/pending"),D.get("/approvals/history?limit=10"),D.get("/approvals/notifications?limit=10"),D.get("/approvals/stats")]);s(o.data),r(T.data),x(A.data),p(h.data)}catch(o){console.error("Error loading approval data:",o)}finally{v(!1)}},j=async(o,T,A="")=>{try{P(!0),await D.post(`/approvals/${o}/action`,{action:T,comments:A}),await c(),E(!1),N(null)}catch(h){console.error("Error processing approval action:",h)}finally{P(!1)}},M=async o=>{try{await D.put(`/approvals/notifications/${o}/read`),x(T=>T.map(A=>A.id===o?{...A,is_read:1}:A))}catch(T){console.error("Error marking notification read:",T)}},z=o=>{switch(o){case"approved":return e.jsx(U,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(ve,{className:"w-5 h-5 text-red-500"});case"pending":return e.jsx(se,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(Z,{className:"w-5 h-5 text-gray-500"})}},R=o=>{switch(o){case"leave":return e.jsx(ce,{className:"w-4 h-4"});case"document":return e.jsx(ye,{className:"w-4 h-4"});case"employee":return e.jsx(ie,{className:"w-4 h-4"});default:return e.jsx(ye,{className:"w-4 h-4"})}},F=o=>{switch(o){case"urgent":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"normal":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"low":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Approval Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage and track approval requests"})]}),e.jsx("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"w-6 h-6 text-gray-600 dark:text-gray-300"}),d.filter(o=>!o.is_read).length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:d.filter(o=>!o.is_read).length})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(se,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.pending_requests||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.approved_requests||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.rejected_requests||0})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Days"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.avg_processing_days?Math.round(w.avg_processing_days):0})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Pending Approvals"})}),e.jsx("div",{className:"p-6",children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No pending approvals"})]}):e.jsx("div",{className:"space-y-4",children:t.map(o=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>{N(o),E(!0)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[R(o.resource_type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:o.workflow_name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Requested by ",o.requester_name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F(o.priority)}`,children:o.priority}),z(o.status)]})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["Resource: ",o.resource_type," #",o.resource_id]}),e.jsxs("p",{children:["Step: ",o.step_order," of workflow"]}),e.jsxs("p",{children:["Due: ",new Date(o.due_date).toLocaleDateString()]})]})]},o.id))})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Notifications"})}),e.jsx("div",{className:"p-6",children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No notifications"})]}):e.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(o=>e.jsxs("div",{className:`p-3 rounded-lg border ${o.is_read?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700":"border-blue-200 dark:border-blue-700 bg-blue-50 dark:bg-blue-900"}`,onClick:()=>M(o.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${o.is_read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:o.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:o.message})]}),!o.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(o.created_at).toLocaleDateString()})]},o.id))})})]})})]}),b&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Approval Details"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Request Information"}),e.jsxs("div",{className:"mt-2 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Workflow:"})," ",u.workflow_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Resource:"})," ",u.resource_type," #",u.resource_id]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Requester:"})," ",u.requester_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Priority:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${F(u.priority)}`,children:u.priority})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(u.created_at).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Due:"})," ",new Date(u.due_date).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Current Step"}),e.jsxs("div",{className:"mt-2 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Step:"})," ",u.step_order]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Approver Type:"})," ",u.approver_type]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Approver Value:"})," ",u.approver_value]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Timeout:"})," ",u.timeout_days," days"]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>j(u.id,"approve"),disabled:f,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-medium disabled:opacity-50",children:f?"Processing...":"Approve"}),e.jsx("button",{onClick:()=>j(u.id,"reject"),disabled:f,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md font-medium disabled:opacity-50",children:f?"Processing...":"Reject"})]})]})})]})})]})},is=()=>{var X,m,i,I,V,G,xe,me,Pe,Te;const{user:n}=J(),[t,s]=l.useState(null),[a,r]=l.useState({local:[],cloud:[]}),[d,x]=l.useState(null),[w,p]=l.useState(!0),[g,v]=l.useState(null),[u,N]=l.useState(!1),[b,E]=l.useState(!1),[f,P]=l.useState(!1),[c,j]=l.useState(!1),[M,z]=l.useState(""),[R,F]=l.useState(""),[o,T]=l.useState(null),[A,h]=l.useState(!1),k=async()=>{var _,K;try{p(!0),v(null),N(!1);const[O,ae,he]=await Promise.all([D.get("/api/backup/status"),D.get("/api/backup/list"),D.get("/api/backup/config")]);s(O.data.data),r(ae.data.data),x(he.data.data)}catch(O){console.error("Backup data fetch error:",O),((_=O.response)==null?void 0:_.status)===403||((K=O.response)==null?void 0:K.status)===401?(N(!0),v("Access denied. Admin privileges required for backup management.")):v("Failed to fetch backup data. Please try again later.")}finally{p(!1)}};l.useEffect(()=>{k()},[]);const B=async()=>{var _,K;try{h(!0),(await D.post("/api/backup/create",{password:M||void 0})).data.success&&(alert("‚úÖ Backup created successfully!"),E(!1),z(""),k())}catch(O){alert("‚ùå Failed to create backup: "+(((K=(_=O.response)==null?void 0:_.data)==null?void 0:K.error)||O.message))}finally{h(!1)}},W=async()=>{var _,K;if(o)try{h(!0),(await D.post("/api/backup/restore",{backupPath:o.path||o.id,password:R||void 0,source:o.source||"local"})).data.success&&(alert("‚úÖ Backup restored successfully! Please restart the application."),P(!1),F(""),T(null),k())}catch(O){alert("‚ùå Failed to restore backup: "+(((K=(_=O.response)==null?void 0:_.data)==null?void 0:K.error)||O.message))}finally{h(!1)}},y=async(_,K)=>{var O,ae;if(confirm(`Are you sure you want to delete "${_.name}"?`))try{h(!0),(await D.delete("/api/backup/delete",{data:{backupPath:_.path||_.id,source:K}})).data.success&&(alert("‚úÖ Backup deleted successfully!"),k())}catch(he){alert("‚ùå Failed to delete backup: "+(((ae=(O=he.response)==null?void 0:O.data)==null?void 0:ae.error)||he.message))}finally{h(!1)}},C=async()=>{var _,K;try{h(!0),(await D.post("/api/backup/test")).data.success&&alert("‚úÖ Backup system test completed successfully!")}catch(O){alert("‚ùå Backup system test failed: "+(((K=(_=O.response)==null?void 0:_.data)==null?void 0:K.error)||O.message))}finally{h(!1)}},L=async()=>{var _,K;if(confirm("Are you sure you want to cleanup old backups? This cannot be undone."))try{h(!0),(await D.post("/api/backup/cleanup")).data.success&&(alert("‚úÖ Cleanup completed successfully!"),k())}catch(O){alert("‚ùå Cleanup failed: "+(((K=(_=O.response)==null?void 0:_.data)==null?void 0:K.error)||O.message))}finally{h(!1)}},q=async _=>{var K,O;try{h(!0),(await D.put("/api/backup/config",_)).data.success&&(alert("‚úÖ Configuration updated successfully!"),j(!1),k())}catch(ae){alert("‚ùå Failed to update configuration: "+(((O=(K=ae.response)==null?void 0:K.data)==null?void 0:O.error)||ae.message))}finally{h(!1)}};return u?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:e.jsx(qt,{className:"h-8 w-8 text-red-600 dark:text-red-400"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Backup management requires administrator privileges. Please contact your system administrator."}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Default Admin Credentials"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Username: ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"admin"}),e.jsx("br",{}),"Password: ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"admin123"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"font-medium mb-2",children:"What you can do:"}),e.jsxs("ul",{className:"space-y-1 text-left max-w-md mx-auto",children:[e.jsx("li",{children:"‚Ä¢ Contact your system administrator"}),e.jsx("li",{children:"‚Ä¢ Use the default admin account for testing"}),e.jsx("li",{children:"‚Ä¢ Request elevated privileges"})]})]})})]})})}):w?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(_=>e.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded"},_))})]})})}):g&&!u?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-800 dark:text-red-200",children:g})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:k,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(H,{className:"h-8 w-8 mr-3 text-primary-600"}),"Backup Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage system backups, cloud storage, and recovery operations"}),n&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Logged in as: ",n.name," (Level ",n.privilege_level||1,")"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:k,disabled:A,className:"flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>E(!0),disabled:A,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Create Backup"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scheduler"}),e.jsx(se,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${(X=t==null?void 0:t.scheduler)!=null&&X.enabled?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(m=t==null?void 0:t.scheduler)!=null&&m.enabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Schedule: ",((i=t==null?void 0:t.scheduler)==null?void 0:i.schedule)||"Not set"]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Next: ",(I=t==null?void 0:t.scheduler)!=null&&I.nextBackup?new Date(t.scheduler.nextBackup).toLocaleString():"Unknown"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Local Storage"}),e.jsx(qe,{className:"h-5 w-5 text-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Backups: ",((V=t==null?void 0:t.local)==null?void 0:V.backups)||0]}),((G=t==null?void 0:t.local)==null?void 0:G.latest)&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Latest: ",new Date(t.local.latest.created).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cloud Storage"}),e.jsx(Oe,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${(xe=t==null?void 0:t.cloud)!=null&&xe.initialized?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(me=t==null?void 0:t.cloud)!=null&&me.initialized?"Connected":"Not Connected"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Backups: ",((Pe=t==null?void 0:t.cloud)==null?void 0:Pe.backups)||0]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Storage: ",((Te=t==null?void 0:t.cloud)==null?void 0:Te.storageUsed)||0," MB"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:C,disabled:A,className:"flex items-center justify-center px-4 py-2 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors",children:[e.jsx($t,{className:"h-4 w-4 mr-2"}),"Test System"]}),e.jsxs("button",{onClick:L,disabled:A,className:"flex items-center justify-center px-4 py-2 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/40 transition-colors",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Cleanup"]}),e.jsxs("button",{onClick:()=>j(!0),disabled:A,className:"flex items-center justify-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsxs("button",{onClick:()=>P(!0),disabled:A,className:"flex items-center justify-center px-4 py-2 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Restore"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 mr-2 text-green-500"}),"Local Backups (",a.local.length,")"]})}),e.jsx("div",{className:"p-6",children:a.local.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No local backups found"}):e.jsx("div",{className:"space-y-3",children:a.local.map((_,K)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:_.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(_.created).toLocaleString()," ‚Ä¢ ",(_.size/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{T({..._,source:"local"}),P(!0)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"Restore",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(_,"local"),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"Delete",children:e.jsx(ee,{className:"h-4 w-4"})})]})]},K))})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 mr-2 text-blue-500"}),"Cloud Backups (",a.cloud.length,")"]})}),e.jsx("div",{className:"p-6",children:a.cloud.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No cloud backups found"}):e.jsx("div",{className:"space-y-3",children:a.cloud.map((_,K)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:_.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(_.createdTime).toLocaleString()," ‚Ä¢ ",(_.size/1024/1024).toFixed(2)," MB"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{T({..._,source:"cloud"}),P(!0)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"Restore",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(_,"cloud"),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"Delete",children:e.jsx(ee,{className:"h-4 w-4"})})]})]},K))})})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create Manual Backup"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (optional)"}),e.jsx("input",{type:"password",value:M,onChange:_=>z(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Leave empty for default password"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:A,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:A?"Creating...":"Create Backup"})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Restore from Backup"}),e.jsxs("div",{className:"space-y-4",children:[o&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:o.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Source: ",o.source]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password (if required)"}),e.jsx("input",{type:"password",value:R,onChange:_=>F(_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter backup password"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 text-yellow-500 mr-2"}),e.jsx("span",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Warning: This will overwrite current data. Make sure you have a backup!"})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{P(!1),T(null),F("")},className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:A,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:A?"Restoring...":"Restore Backup"})]})]})]})}),c&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Backup Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enabled"}),e.jsx("input",{type:"checkbox",checked:d.enabled,onChange:_=>x({...d,enabled:_.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Schedule (Cron)"}),e.jsx("input",{type:"text",value:d.schedule,onChange:_=>x({...d,schedule:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0 2 * * *"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Keep Local Backups"}),e.jsx("input",{type:"number",value:d.keepLocalBackups,onChange:_=>x({...d,keepLocalBackups:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"1",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Keep Cloud Backups"}),e.jsx("input",{type:"number",value:d.keepCloudBackups,onChange:_=>x({...d,keepCloudBackups:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"1",max:"365"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload to Cloud"}),e.jsx("input",{type:"checkbox",checked:d.uploadToCloud,onChange:_=>x({...d,uploadToCloud:_.target.checked}),className:"rounded border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>q(d),disabled:A,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:A?"Updating...":"Update Configuration"})]})]})]})})]})})},ls=({children:n})=>{const{user:t,loading:s}=J();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?n:e.jsx(it,{to:"/login",replace:!0})},ds=()=>{var u;const[n,t]=l.useState({isOnline:navigator.onLine,quality:"unknown",pendingSync:0,currentMethod:null}),[s,a]=l.useState(!1),[r,d]=l.useState(!1);l.useEffect(()=>{x();const N=P=>{x()},b=P=>{t(c=>({...c,quality:P.detail.quality}))},E=P=>{d(!1),x()};window.addEventListener("networkStatusChange",N),window.addEventListener("connectionQualityChange",b),window.addEventListener("syncComplete",E);const f=setInterval(x,1e4);return()=>{window.removeEventListener("networkStatusChange",N),window.removeEventListener("connectionQualityChange",b),window.removeEventListener("syncComplete",E),clearInterval(f)}},[]);const x=()=>{const N=oe.getConnectionStatus();t(N)},w=async()=>{d(!0);try{await oe.forceSync()}catch(N){console.error("Sync failed:",N)}finally{d(!1)}},p=()=>{if(!n.isOnline)return e.jsx(Ce,{className:"w-4 h-4 text-red-500"});switch(n.quality){case"excellent":return e.jsx(U,{className:"w-4 h-4 text-green-500"});case"good":return e.jsx(Y,{className:"w-4 h-4 text-green-400"});case"fair":return e.jsx(le,{className:"w-4 h-4 text-yellow-500"});case"poor":return e.jsx(le,{className:"w-4 h-4 text-orange-500"});default:return e.jsx(Y,{className:"w-4 h-4 text-gray-400"})}},g=()=>{if(!n.isOnline)return"Offline";switch(n.quality){case"excellent":return"Excellent";case"good":return"Good";case"fair":return"Fair";case"poor":return"Poor";default:return"Unknown"}},v=()=>{if(!n.isOnline)return"text-red-600 bg-red-50 border-red-200";switch(n.quality){case"excellent":return"text-green-600 bg-green-50 border-green-200";case"good":return"text-green-600 bg-green-50 border-green-200";case"fair":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"poor":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return!n.isOnline&&n.pendingSync===0?null:e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border p-3 max-w-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[p(),e.jsx("span",{className:`text-sm font-medium ${v()}`,children:g()})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.pendingSync>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[n.pendingSync," pending"]}),e.jsx("button",{onClick:()=>a(!s),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),s&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Connection:"}),e.jsx("span",{className:"font-medium",children:((u=n.currentMethod)==null?void 0:u.name)||"Primary"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Quality:"}),e.jsx("span",{className:"font-medium capitalize",children:n.quality})]}),n.pendingSync>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Pending Sync:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[n.pendingSync," items"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`font-medium ${n.isOnline?"text-green-600":"text-red-600"}`,children:n.isOnline?"Online":"Offline"})]})]}),n.pendingSync>0&&e.jsxs("button",{onClick:w,disabled:r,className:"mt-3 w-full flex items-center justify-center space-x-2 bg-blue-500 text-white px-3 py-2 rounded-md text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[r?e.jsx(be,{className:"w-4 h-4 animate-spin"}):e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:r?"Syncing...":"Sync Now"})]})]})]})})},os=()=>{const{user:n,e2eeStatus:t,initializeE2EEManually:s,needsE2EEReinit:a}=J(),[r,d]=l.useState(""),[x,w]=l.useState(!1),[p,g]=l.useState(""),[v,u]=l.useState(!1),[N,b]=l.useState(!1);if(l.useEffect(()=>{const f=a();console.log("üîç E2EEReinitModal: needsE2EEReinit() returned:",f),console.log("üîç E2EEReinitModal: user:",!!n,"e2eeStatus.supported:",t.supported,"e2eeStatus.initialized:",t.initialized),f&&!N&&(console.log("üîí E2EEReinitModal: Showing security modal"),b(!0))},[n,t.supported,t.initialized,N]),l.useEffect(()=>{const f=()=>{console.log("üîí E2EEReinitModal: Received showE2EEModal event"),a()&&(console.log("üîí E2EEReinitModal: Showing modal from custom event"),b(!0))};return window.addEventListener("showE2EEModal",f),()=>{window.removeEventListener("showE2EEModal",f)}},[a]),!a()||!N)return null;const E=async f=>{f.preventDefault(),w(!0),g("");try{const P=await s(r,n.salt);P.success?(u(!0),setTimeout(()=>{u(!1)},2e3)):g(P.error||"Failed to initialize E2EE")}catch(P){g(P.message||"An unexpected error occurred")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-lg w-full p-8 border-2 border-red-500",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(H,{className:"h-12 w-12 text-red-500 animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"üîí Security Authentication Required"}),e.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 mt-1",children:"End-to-end encryption must be re-established for your security"})]})]}),v?e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-700 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3 text-green-700 dark:text-green-300",children:[e.jsx(U,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:"‚úÖ Security Initialized Successfully!"}),e.jsx("p",{className:"text-sm mt-1",children:"Your end-to-end encryption is now active and protecting your data."})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(le,{className:"h-6 w-6 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-base text-red-800 dark:text-red-200",children:[e.jsx("p",{className:"font-bold text-lg mb-2",children:"‚ö†Ô∏è Security Alert"}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Your application was reopened from a URL."})," For maximum security, end-to-end encryption must be re-authenticated."]}),e.jsx("p",{className:"text-sm",children:"This ensures that only you can access your encrypted data, even if someone else gains access to your browser session."})]})]})}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"üîê Enter Your Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:f=>d(f.target.value),className:"w-full pl-12 pr-4 py-4 text-lg border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Enter your password to continue",required:!0,disabled:x,autoFocus:!0})]})]}),p&&e.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg p-4 text-red-700 dark:text-red-300 font-medium",children:["‚ùå ",p]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"submit",disabled:x||!r,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-bold py-4 px-6 rounded-lg text-lg transition-all duration-200 transform hover:scale-105 disabled:transform-none",children:x?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Initializing Security..."]}):"üîí Initialize End-to-End Encryption"})})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Your password is used only for key derivation and is never stored"]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"This ensures maximum security for your sensitive HR data"]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"E2EE session will remain active until you close the browser"]})]})})]})]})})},cs="2.1.4";function xs(){return e.jsx(bt,{children:e.jsx(pt,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ds,{}),e.jsx(os,{}),e.jsxs(lt,{children:[e.jsx(Q,{path:"/login",element:e.jsx(Ht,{})}),e.jsx(Q,{path:"/emergency-logout",element:e.jsx(ss,{})}),e.jsxs(Q,{path:"/",element:e.jsx(ls,{children:e.jsx(Kt,{})}),children:[e.jsx(Q,{index:!0,element:e.jsx(Wt,{})}),e.jsx(Q,{path:"employees",element:e.jsx(Gt,{})}),e.jsx(Q,{path:"leave",element:e.jsx(Qt,{})}),e.jsx(Q,{path:"privileges",element:e.jsx(Jt,{})}),e.jsx(Q,{path:"myanmar-security",element:e.jsx(Zt,{})}),e.jsx(Q,{path:"profile",element:e.jsx(Xt,{})}),e.jsx(Q,{path:"e2ee-demo",element:e.jsx(es,{})}),e.jsx(Q,{path:"advanced-security",element:e.jsx(ts,{})}),e.jsx(Q,{path:"documents",element:e.jsx(as,{})}),e.jsx(Q,{path:"onboarding",element:e.jsx(rs,{})}),e.jsx(Q,{path:"approvals",element:e.jsx(ns,{})}),e.jsx(Q,{path:"backup",element:e.jsx(is,{})})]})]}),e.jsxs("div",{className:"fixed bottom-4 right-4 text-xs text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm",children:["v",cs]})]})})})}try{const n=document.getElementById("root");n?_e.createRoot(n).render(e.jsx(at.StrictMode,{children:e.jsx(dt,{children:e.jsx(xs,{})})})):console.error("Root element not found")}catch(n){console.error("Failed to render application:",n)}
//# sourceMappingURL=index-Dk2NKoGZ.js.map
